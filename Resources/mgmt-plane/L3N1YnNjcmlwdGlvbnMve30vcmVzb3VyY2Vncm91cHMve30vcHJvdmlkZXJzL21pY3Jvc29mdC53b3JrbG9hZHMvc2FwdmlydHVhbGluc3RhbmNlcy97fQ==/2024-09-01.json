{"plane": "mgmt-plane", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.workloads/sapvirtualinstances/{}", "version": "2024-09-01", "swagger": "mgmt-plane/workloads/ResourceProviders/Microsoft.Workloads/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuV29ya2xvYWRzL3NhcFZpcnR1YWxJbnN0YW5jZXMve3NhcFZpcnR1YWxJbnN0YW5jZU5hbWV9/V/MjAyNC0wOS0wMQ=="}], "commandGroups": [{"name": "workloads sap-virtual-instance", "commands": [{"name": "show", "version": "2024-09-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.workloads/sapvirtualinstances/{}", "version": "2024-09-01", "swagger": "mgmt-plane/workloads/ResourceProviders/Microsoft.Workloads/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuV29ya2xvYWRzL3NhcFZpcnR1YWxJbnN0YW5jZXMve3NhcFZpcnR1YWxJbnN0YW5jZU5hbWV9/V/MjAyNC0wOS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "string", "var": "$Path.sapVirtualInstanceName", "options": ["n", "name", "sap-virtual-instance-name"], "required": true, "idPart": "name", "help": {"short": "The name of the Virtual Instances for SAP solutions resource"}, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}], "operations": [{"operationId": "SapVirtualInstances_Get", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Workloads/sapVirtualInstances/{sapVirtualInstanceName}", "request": {"method": "get", "path": {"params": [{"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true, "format": {"maxLength": 90, "minLength": 1}}, {"type": "string", "name": "sapVirtualInstanceName", "arg": "$Path.sapVirtualInstanceName", "required": true, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "uuid", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-09-01"}, "type": "string", "name": "api-version", "required": true, "format": {"minLength": 1}}]}}, "responses": [{"statusCode": [200], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "ResourceId", "name": "id", "format": {"template": "/subscriptions/{}/resourceGroups/{}/providers/Microsoft.Workloads/sapVirtualInstances/{}"}}, {"type": "IdentityObject", "name": "identity", "props": [{"type": "string", "name": "type", "required": true, "enum": {"items": [{"value": "None"}, {"value": "UserAssigned"}]}}, {"type": "object", "name": "userAssignedIdentities", "additionalProps": {"item": {"nullable": true, "type": "object", "props": [{"readOnly": true, "type": "uuid", "name": "clientId"}, {"readOnly": true, "type": "uuid", "name": "principalId"}]}}}]}, {"type": "ResourceLocation", "name": "location", "required": true}, {"readOnly": true, "type": "string", "name": "name"}, {"type": "object", "name": "properties", "props": [{"type": "object", "name": "configuration", "required": true, "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"value": "Deployment"}, {"value": "DeploymentWithOSConfig"}, {"value": "Discovery"}]}}], "discriminators": [{"property": "configurationType", "value": "Deployment", "props": [{"type": "string", "name": "appLocation"}, {"type": "object", "name": "infrastructureConfiguration", "props": [{"type": "string", "name": "appResourceGroup", "required": true}, {"type": "string", "name": "deploymentType", "required": true, "enum": {"items": [{"value": "SingleServer"}, {"value": "ThreeTier"}]}}], "discriminators": [{"property": "deploymentType", "value": "SingleServer", "props": [{"type": "object", "name": "customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "virtualMachine", "props": [{"type": "object", "name": "dataDiskNames", "additionalProps": {"item": {"type": "array<string>", "item": {"type": "string"}}}}, {"type": "string", "name": "hostName"}, {"type": "array<object>", "name": "networkInterfaces", "item": {"type": "object", "props": [{"type": "string", "name": "networkInterfaceName"}]}}, {"type": "string", "name": "osDiskName"}, {"type": "string", "name": "vmName"}], "cls": "VirtualMachineResourceNames_read"}]}]}, {"type": "string", "name": "databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "object", "name": "dbDiskConfiguration", "props": [{"type": "object", "name": "diskVolumeConfigurations", "additionalProps": {"item": {"type": "object", "props": [{"type": "integer64", "name": "count"}, {"type": "integer64", "name": "sizeGB"}, {"type": "object", "name": "sku", "props": [{"type": "string", "name": "name", "enum": {"items": [{"value": "PremiumV2_LRS"}, {"value": "Premium_LRS"}, {"value": "Premium_ZRS"}, {"value": "StandardSSD_LRS"}, {"value": "StandardSSD_ZRS"}, {"value": "Standard_LRS"}, {"value": "UltraSSD_LRS"}]}}]}]}}}], "cls": "DiskConfiguration_read"}, {"type": "object", "name": "networkConfiguration", "props": [{"default": {"value": false}, "type": "boolean", "name": "isSecondaryIpEnabled"}], "cls": "NetworkConfiguration_read"}, {"type": "string", "name": "subnetId", "required": true}, {"type": "object", "name": "virtualMachineConfiguration", "required": true, "props": [{"type": "object", "name": "imageReference", "required": true, "props": [{"type": "ResourceId", "name": "id"}, {"type": "string", "name": "offer"}, {"type": "string", "name": "publisher"}, {"type": "string", "name": "sku"}, {"type": "string", "name": "version"}]}, {"type": "object", "name": "osProfile", "required": true, "props": [{"type": "password", "name": "adminPassword", "secret": true}, {"type": "string", "name": "adminUsername"}, {"type": "object", "name": "osConfiguration", "props": [{"type": "string", "name": "osType", "required": true, "enum": {"items": [{"value": "Linux"}, {"value": "Windows"}]}}], "discriminators": [{"property": "osType", "value": "Linux", "props": [{"type": "boolean", "name": "disablePasswordAuthentication"}, {"type": "object", "name": "ssh", "props": [{"type": "array<object>", "name": "publicKeys", "item": {"type": "object", "props": [{"type": "string", "name": "keyData"}]}}]}, {"type": "object", "name": "sshKeyPair", "props": [{"type": "password", "name": "privateKey", "secret": true}, {"type": "string", "name": "publicKey"}]}]}, {"property": "osType", "value": "Windows"}]}]}, {"type": "string", "name": "vmSize", "required": true}], "cls": "VirtualMachineConfiguration_read"}]}, {"property": "deploymentType", "value": "ThreeTier", "props": [{"type": "object", "name": "applicationServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "centralServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "applicationServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "centralServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "object", "name": "loadBalancer", "props": [{"type": "array<string>", "name": "backendPoolNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "frontendIpConfigurationNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "healthProbeNames", "item": {"type": "string"}}, {"type": "string", "name": "loadBalancerName"}], "cls": "LoadBalancerResourceNames_read"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "databaseServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "@LoadBalancerResourceNames_read", "name": "loadBalancer"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "sharedStorage", "props": [{"type": "string", "name": "sharedStorageAccountName"}, {"type": "string", "name": "sharedStorageAccountPrivateEndPointName"}]}]}]}, {"type": "object", "name": "databaseServer", "required": true, "props": [{"type": "string", "name": "databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "@DiskConfiguration_read", "name": "diskConfiguration"}, {"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "highAvailabilityConfig", "props": [{"type": "string", "name": "highAvailabilityType", "required": true, "enum": {"items": [{"value": "AvailabilitySet"}, {"value": "AvailabilityZone"}]}}]}, {"type": "@NetworkConfiguration_read", "name": "networkConfiguration"}, {"type": "object", "name": "storageConfiguration", "props": [{"type": "object", "name": "transportFileShareConfiguration", "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"value": "CreateAndMount"}, {"value": "Mount"}, {"value": "Skip"}]}}], "discriminators": [{"property": "configurationType", "value": "CreateAndMount", "props": [{"type": "string", "name": "resourceGroup"}, {"type": "string", "name": "storageAccountName"}]}, {"property": "configurationType", "value": "Mount", "props": [{"type": "string", "name": "id", "required": true}, {"type": "string", "name": "privateEndpointId", "required": true}]}, {"property": "configurationType", "value": "Skip"}]}]}]}], "cls": "InfrastructureConfiguration_read"}, {"type": "object", "name": "softwareConfiguration", "props": [{"type": "string", "name": "softwareInstallationType", "required": true, "enum": {"items": [{"value": "External"}, {"value": "SAPInstallWithoutOSConfig"}, {"value": "ServiceInitiated"}]}}], "discriminators": [{"property": "softwareInstallationType", "value": "External", "props": [{"type": "string", "name": "centralServerVmId"}]}, {"property": "softwareInstallationType", "value": "SAPInstallWithoutOSConfig", "props": [{"type": "string", "name": "bomUrl", "required": true}, {"type": "object", "name": "highAvailabilitySoftwareConfiguration", "props": [{"type": "string", "name": "fencingClientId", "required": true}, {"type": "password", "name": "fencingClientPassword", "required": true, "secret": true}], "cls": "HighAvailabilitySoftwareConfiguration_read"}, {"type": "string", "name": "sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "softwareVersion", "required": true}]}, {"property": "softwareInstallationType", "value": "ServiceInitiated", "props": [{"type": "string", "name": "bomUrl", "required": true}, {"type": "@HighAvailabilitySoftwareConfiguration_read", "name": "highAvailabilitySoftwareConfiguration"}, {"type": "string", "name": "sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "sapFqdn", "required": true}, {"type": "string", "name": "softwareVersion", "required": true}, {"type": "password", "name": "sshPrivateKey", "required": true, "secret": true}]}], "cls": "SoftwareConfiguration_read"}]}, {"property": "configurationType", "value": "DeploymentWithOSConfig", "props": [{"type": "string", "name": "appLocation"}, {"type": "@InfrastructureConfiguration_read", "name": "infrastructureConfiguration"}, {"type": "object", "name": "osSapConfiguration", "props": [{"type": "object", "name": "deployerVmPackages", "props": [{"type": "string", "name": "storageAccountId"}, {"type": "string", "name": "url"}]}, {"type": "string", "name": "sapFqdn"}]}, {"type": "@SoftwareConfiguration_read", "name": "softwareConfiguration"}]}, {"property": "configurationType", "value": "Discovery", "props": [{"readOnly": true, "type": "string", "name": "appLocation"}, {"type": "string", "name": "centralServerVmId"}, {"type": "string", "name": "managedRgStorageAccountName", "format": {"maxLength": 24, "minLength": 3}}]}]}, {"type": "string", "name": "environment", "required": true, "enum": {"items": [{"value": "NonProd"}, {"value": "Prod"}]}}, {"readOnly": true, "type": "object", "name": "errors", "props": [{"type": "object", "name": "properties", "props": [{"readOnly": true, "type": "string", "name": "code"}, {"readOnly": true, "type": "array<@ErrorDefinition_read>", "name": "details", "item": {"type": "@ErrorDefinition_read"}}, {"readOnly": true, "type": "string", "name": "message"}], "cls": "ErrorDefinition_read"}]}, {"readOnly": true, "type": "string", "name": "health", "enum": {"items": [{"value": "Degraded"}, {"value": "Healthy"}, {"value": "Unhealthy"}, {"value": "Unknown"}]}}, {"type": "object", "name": "managedResourceGroupConfiguration", "props": [{"type": "string", "name": "name"}]}, {"type": "string", "name": "managedResourcesNetworkAccessType", "enum": {"items": [{"value": "Private"}, {"value": "Public"}]}}, {"readOnly": true, "type": "string", "name": "provisioningState", "enum": {"items": [{"value": "Canceled"}, {"value": "Creating"}, {"value": "Deleting"}, {"value": "Failed"}, {"value": "Succeeded"}, {"value": "Updating"}]}}, {"type": "string", "name": "sapProduct", "required": true, "enum": {"items": [{"value": "ECC"}, {"value": "Other"}, {"value": "S4HANA"}]}}, {"readOnly": true, "type": "string", "name": "state", "enum": {"items": [{"value": "ACSSInstallationBlocked"}, {"value": "DiscoveryFailed"}, {"value": "DiscoveryInProgress"}, {"value": "DiscoveryPending"}, {"value": "InfrastructureDeploymentFailed"}, {"value": "InfrastructureDeploymentInProgress"}, {"value": "InfrastructureDeploymentPending"}, {"value": "RegistrationComplete"}, {"value": "SoftwareDetectionFailed"}, {"value": "SoftwareDetectionInProgress"}, {"value": "SoftwareInstallationFailed"}, {"value": "SoftwareInstallationInProgress"}, {"value": "SoftwareInstallationPending"}]}}, {"readOnly": true, "type": "string", "name": "status", "enum": {"items": [{"value": "Offline"}, {"value": "PartiallyRunning"}, {"value": "Running"}, {"value": "SoftShutdown"}, {"value": "Starting"}, {"value": "Stopping"}, {"value": "Unavailable"}]}}], "clientFlatten": true}, {"readOnly": true, "type": "object", "name": "systemData", "props": [{"type": "dateTime", "name": "createdAt"}, {"type": "string", "name": "createdBy"}, {"type": "string", "name": "createdByType", "enum": {"items": [{"value": "Application"}, {"value": "Key"}, {"value": "ManagedIdentity"}, {"value": "User"}]}}, {"type": "dateTime", "name": "lastModifiedAt"}, {"type": "string", "name": "lastModifiedBy"}, {"type": "string", "name": "lastModifiedByType", "enum": {"items": [{"value": "Application"}, {"value": "Key"}, {"value": "ManagedIdentity"}, {"value": "User"}]}}]}, {"type": "object", "name": "tags", "additionalProps": {"item": {"type": "string"}}}, {"readOnly": true, "type": "string", "name": "type"}]}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@MgmtErrorFormat"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}], "confirmation": ""}, {"name": "delete", "version": "2024-09-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.workloads/sapvirtualinstances/{}", "version": "2024-09-01", "swagger": "mgmt-plane/workloads/ResourceProviders/Microsoft.Workloads/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuV29ya2xvYWRzL3NhcFZpcnR1YWxJbnN0YW5jZXMve3NhcFZpcnR1YWxJbnN0YW5jZU5hbWV9/V/MjAyNC0wOS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "string", "var": "$Path.sapVirtualInstanceName", "options": ["n", "name", "sap-virtual-instance-name"], "required": true, "idPart": "name", "help": {"short": "The name of the Virtual Instances for SAP solutions resource"}, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}], "operations": [{"longRunning": {"finalStateVia": "location"}, "operationId": "SapVirtualInstances_Delete", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Workloads/sapVirtualInstances/{sapVirtualInstanceName}", "request": {"method": "delete", "path": {"params": [{"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true, "format": {"maxLength": 90, "minLength": 1}}, {"type": "string", "name": "sapVirtualInstanceName", "arg": "$Path.sapVirtualInstanceName", "required": true, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "uuid", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-09-01"}, "type": "string", "name": "api-version", "required": true, "format": {"minLength": 1}}]}}, "responses": [{"statusCode": [202], "header": {"items": [{"name": "Location"}, {"name": "Retry-After"}]}}, {"statusCode": [204]}, {"statusCode": [200, 201]}, {"isError": true, "body": {"json": {"schema": {"type": "@MgmtErrorFormat"}}}}]}}], "confirmation": "Are you sure you want to perform this operation?"}, {"name": "create", "version": "2024-09-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.workloads/sapvirtualinstances/{}", "version": "2024-09-01", "swagger": "mgmt-plane/workloads/ResourceProviders/Microsoft.Workloads/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuV29ya2xvYWRzL3NhcFZpcnR1YWxJbnN0YW5jZXMve3NhcFZpcnR1YWxJbnN0YW5jZU5hbWV9/V/MjAyNC0wOS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "string", "var": "$Path.sapVirtualInstanceName", "options": ["n", "name", "sap-virtual-instance-name"], "required": true, "idPart": "name", "help": {"short": "The name of the Virtual Instances for SAP solutions resource"}, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}, {"name": "Configuration", "args": [{"type": "object", "var": "$resource.properties.configuration.Deployment", "options": ["configuration-org"], "group": "Configuration", "help": {"short": "Path to the configuration file. Support json-file and yaml-file."}, "args": [{"type": "string", "var": "$resource.properties.configuration.Deployment.appLocation", "options": ["app-location"], "help": {"short": "The geo-location where the SAP system is to be created."}}, {"type": "object", "var": "$resource.properties.configuration.Deployment.infrastructureConfiguration", "options": ["infrastructure-configuration"], "help": {"short": "The infrastructure configuration."}, "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer", "options": ["single-server"], "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer.customResourceNames", "options": ["custom-resource-names"], "help": {"short": "The set of custom names to be used for underlying azure resources that are part of the SAP system."}, "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer.customResourceNames.FullResourceName", "options": ["full-resource-name"], "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer.customResourceNames.FullResourceName.virtualMachine", "options": ["virtual-machine"], "help": {"short": "The resource names object for virtual machine and related resources."}, "args": [{"type": "object", "var": "@VirtualMachineResourceNames_create.dataDiskNames", "options": ["data-disk-names"], "help": {"short": "The full resource names for virtual machine data disks. This is a dictionary containing list of names of data disks per volume. Currently supported volumes for database layer are ['hana/data', 'hana/log', hana/shared', 'usr/sap', 'os', 'backup']. For application and cs layers, only 'default' volume is supported"}, "additionalProps": {"item": {"type": "array<string>", "item": {"type": "string"}}}}, {"type": "string", "var": "@VirtualMachineResourceNames_create.hostName", "options": ["host-name"], "help": {"short": "The full name for virtual-machine's host (computer name). Currently, ACSS only supports host names which are less than or equal to 13 characters long. If this value is not provided, vmName will be used as host name."}}, {"type": "array<object>", "var": "@VirtualMachineResourceNames_create.networkInterfaces", "options": ["network-interfaces"], "help": {"short": "The list of network interface name objects for the selected virtual machine. Currently, only one network interface is supported per virtual machine."}, "item": {"type": "object", "args": [{"type": "string", "var": "@VirtualMachineResourceNames_create.networkInterfaces[].networkInterfaceName", "options": ["network-interface-name"], "help": {"short": "The full name for network interface. If name is not provided, service uses a default name based on the deployment type. For SingleServer, default name is {SID}-Nic. In case of HA-AvZone systems, default name will be {SID}-{App/ASCS/DB}-Zone{A/B}-Nic with an incrementor at the end in case of more than 1 instance per layer. For distributed and HA-AvSet systems, default name will be {SID}-{App/ASCS/DB}-Nic with an incrementor at the end in case of more than 1 instance per layer."}}]}}, {"type": "string", "var": "@VirtualMachineResourceNames_create.osDiskName", "options": ["os-disk-name"], "help": {"short": "The full name for OS disk attached to the VM. If this value is not provided, it will be named by ARM as per its default naming standards (prefixed with vm name). There is only one OS disk attached per Virtual Machine."}}, {"type": "string", "var": "@VirtualMachineResourceNames_create.vmName", "options": ["vm-name"], "help": {"short": "The full name for virtual machine. The length of this field can be upto 64 characters. If name is not provided, service uses a default name based on the deployment type. For SingleServer, default name is {SID}vm. In case of HA-AvZone systems, default name will be {SID}{app/ascs/db}z{a/b}vm with an incrementor at the end in case of more than 1 vm per layer. For distributed and HA-AvSet systems, default name will be {SID}{app/ascs/db}vm with an incrementor at the end in case of more than 1 vm per layer."}}], "cls": "VirtualMachineResourceNames_create"}]}]}, {"type": "string", "var": "@InfrastructureConfiguration_create.SingleServer.databaseType", "options": ["database-type"], "help": {"short": "The database type."}, "enum": {"items": [{"name": "DB2", "value": "DB2"}, {"name": "HANA", "value": "HANA"}]}}, {"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer.dbDiskConfiguration", "options": ["db-disk-configuration"], "help": {"short": "Gets or sets the disk configuration."}, "args": [{"type": "object", "var": "@DiskConfiguration_create.diskVolumeConfigurations", "options": ["disk-volume-configurations"], "help": {"short": "The disk configuration for the db volume. For HANA, Required volumes are: ['hana/data', 'hana/log', hana/shared', 'usr/sap', 'os'], Optional volume : ['backup']."}, "additionalProps": {"item": {"type": "object", "args": [{"type": "integer64", "var": "@DiskConfiguration_create.diskVolumeConfigurations{}.count", "options": ["count"], "help": {"short": "The total number of disks required for the concerned volume."}}, {"type": "integer64", "var": "@DiskConfiguration_create.diskVolumeConfigurations{}.sizeGB", "options": ["size-gb"], "help": {"short": "The disk size in GB."}}, {"type": "object", "var": "@DiskConfiguration_create.diskVolumeConfigurations{}.sku", "options": ["sku"], "help": {"short": "The disk SKU details."}, "args": [{"type": "string", "var": "@DiskConfiguration_create.diskVolumeConfigurations{}.sku.name", "options": ["name"], "help": {"short": "Defines the disk sku name."}, "enum": {"items": [{"name": "PremiumV2_LRS", "value": "PremiumV2_LRS"}, {"name": "Premium_LRS", "value": "Premium_LRS"}, {"name": "Premium_ZRS", "value": "Premium_ZRS"}, {"name": "StandardSSD_LRS", "value": "StandardSSD_LRS"}, {"name": "StandardSSD_ZRS", "value": "StandardSSD_ZRS"}, {"name": "Standard_LRS", "value": "Standard_LRS"}, {"name": "UltraSSD_LRS", "value": "UltraSSD_LRS"}]}}]}]}}}], "cls": "DiskConfiguration_create"}, {"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer.networkConfiguration", "options": ["network-configuration"], "help": {"short": "Network configuration for the server"}, "args": [{"type": "boolean", "var": "@NetworkConfiguration_create.isSecondaryIpEnabled", "options": ["is-secondary-ip-enabled"], "help": {"short": "Specifies whether a secondary IP address should be added to the network interface on all VMs of the SAP system being deployed"}, "default": {"value": false}}], "cls": "NetworkConfiguration_create"}, {"type": "string", "var": "@InfrastructureConfiguration_create.SingleServer.subnetId", "options": ["subnet-id"], "required": true, "help": {"short": "The subnet id."}}, {"type": "object", "var": "@InfrastructureConfiguration_create.SingleServer.virtualMachineConfiguration", "options": ["virtual-machine-configuration"], "required": true, "help": {"short": "Gets or sets the virtual machine configuration."}, "args": [{"type": "object", "var": "@VirtualMachineConfiguration_create.imageReference", "options": ["image-reference"], "required": true, "help": {"short": "The image reference."}, "args": [{"type": "ResourceId", "var": "@VirtualMachineConfiguration_create.imageReference.id", "options": ["id"], "help": {"short": "Specifies the ARM resource ID of the Azure Compute Gallery image version used for creating ACSS VMs. You will need to provide this input when you choose to deploy virtual machines in ACSS with OS image from the Azure Compute gallery."}}, {"type": "string", "var": "@VirtualMachineConfiguration_create.imageReference.offer", "options": ["offer"], "help": {"short": "Specifies the offer of the platform image or marketplace image used to create the virtual machine."}}, {"type": "string", "var": "@VirtualMachineConfiguration_create.imageReference.publisher", "options": ["publisher"], "help": {"short": "The image publisher."}}, {"type": "string", "var": "@VirtualMachineConfiguration_create.imageReference.sku", "options": ["sku"], "help": {"short": "The image SKU."}}, {"type": "string", "var": "@VirtualMachineConfiguration_create.imageReference.version", "options": ["version"], "help": {"short": "Specifies the version of the platform image or marketplace image used to create the virtual machine. The allowed formats are Major.Minor.Build or 'latest'. Major, Minor, and Build are decimal numbers. Specify 'latest' to use the latest version of an image available at deploy time. Even if you use 'latest', the VM image will not automatically update after deploy time even if a new version becomes available."}}]}, {"type": "object", "var": "@VirtualMachineConfiguration_create.osProfile", "options": ["os-profile"], "required": true, "help": {"short": "The OS profile."}, "args": [{"type": "password", "var": "@VirtualMachineConfiguration_create.osProfile.adminPassword", "options": ["admin-password"], "help": {"short": "Specifies the password of the administrator account. <br><br> **Minimum-length (Windows):** 8 characters <br><br> **Minimum-length (Linux):** 6 characters <br><br> **Max-length (Windows):** 123 characters <br><br> **Max-length (Linux):** 72 characters <br><br> **Complexity requirements:** 3 out of 4 conditions below need to be fulfilled <br> Has lower characters <br>Has upper characters <br> Has a digit <br> Has a special character (Regex match [\\W_]) <br><br> **Disallowed values:** \"abc@123\", \"P@$$w0rd\", \"P@ssw0rd\", \"P@ssword123\", \"Pa$$word\", \"pass@word1\", \"Password!\", \"Password1\", \"Password22\", \"iloveyou!\" <br><br> For resetting the password, see [How to reset the Remote Desktop service or its login password in a Windows VM](https://docs.microsoft.com/troubleshoot/azure/virtual-machines/reset-rdp) <br><br> For resetting root password, see [Manage users, SSH, and check or repair disks on Azure Linux VMs using the VMAccess Extension](https://docs.microsoft.com/troubleshoot/azure/virtual-machines/troubleshoot-ssh-connection)"}, "prompt": {"msg": "Password:"}}, {"type": "string", "var": "@VirtualMachineConfiguration_create.osProfile.adminUsername", "options": ["admin-username"], "help": {"short": "Specifies the name of the administrator account. <br><br> This property cannot be updated after the VM is created. <br><br> **Windows-only restriction:** Cannot end in \".\" <br><br> **Disallowed values:** \"administrator\", \"admin\", \"user\", \"user1\", \"test\", \"user2\", \"test1\", \"user3\", \"admin1\", \"1\", \"123\", \"a\", \"actuser\", \"adm\", \"admin2\", \"aspnet\", \"backup\", \"console\", \"david\", \"guest\", \"john\", \"owner\", \"root\", \"server\", \"sql\", \"support\", \"support_388945a0\", \"sys\", \"test2\", \"test3\", \"user4\", \"user5\". <br><br> **Minimum-length (Linux):** 1  character <br><br> **Max-length (Linux):** 64 characters <br><br> **Max-length (Windows):** 20 characters."}}, {"type": "object", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration", "options": ["os-configuration"], "help": {"short": "Specifies Windows operating system settings on the virtual machine."}, "args": [{"type": "object", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux", "options": ["linux"], "args": [{"type": "boolean", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.disablePasswordAuthentication", "options": ["disable-password-authentication"], "help": {"short": "Specifies whether password authentication should be disabled."}}, {"type": "object", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.ssh", "options": ["ssh"], "help": {"short": "Specifies the ssh key configuration for a Linux OS. (This property is deprecated, please use 'sshKeyPair' instead)"}, "args": [{"type": "array<object>", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.ssh.publicKeys", "options": ["public-keys"], "help": {"short": "The list of SSH public keys used to authenticate with linux based VMs."}, "item": {"type": "object", "args": [{"type": "string", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.ssh.publicKeys[].keyData", "options": ["key-data"], "help": {"short": "SSH public key certificate used to authenticate with the VM through ssh. The key needs to be at least 2048-bit and in ssh-rsa format. <br><br> For creating ssh keys, see [Create SSH keys on Linux and Mac for Linux VMs in Azure](https://docs.microsoft.com/azure/virtual-machines/linux/create-ssh-keys-detailed)."}}]}}]}, {"type": "object", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.sshKeyPair", "options": ["ssh-key-pair"], "help": {"short": "The SSH Key-pair used to authenticate with the VM's."}, "args": [{"type": "password", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.sshKeyPair.privateKey", "options": ["private-key"], "help": {"short": "SSH private key."}, "prompt": {"msg": "Password:"}}, {"type": "string", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.sshKeyPair.publicKey", "options": ["public-key"], "help": {"short": "SSH public key"}}]}]}, {"blank": {"value": {}}, "type": "object", "var": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Windows", "options": ["windows"]}]}]}, {"type": "string", "var": "@VirtualMachineConfiguration_create.vmSize", "options": ["vm-size"], "required": true, "help": {"short": "The virtual machine size."}}], "cls": "VirtualMachineConfiguration_create"}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier", "options": ["three-tier"], "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.applicationServer", "options": ["application-server"], "required": true, "help": {"short": "The application server configuration."}, "args": [{"type": "integer64", "var": "@InfrastructureConfiguration_create.ThreeTier.applicationServer.instanceCount", "options": ["instance-count"], "required": true, "help": {"short": "The number of app server instances."}}, {"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.applicationServer.subnetId", "options": ["subnet-id"], "required": true, "help": {"short": "The subnet id."}}, {"type": "@VirtualMachineConfiguration_create", "var": "@InfrastructureConfiguration_create.ThreeTier.applicationServer.virtualMachineConfiguration", "options": ["virtual-machine-configuration"], "required": true, "help": {"short": "Gets or sets the virtual machine configuration."}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.centralServer", "options": ["central-server"], "required": true, "help": {"short": "The central server configuration."}, "args": [{"type": "integer64", "var": "@InfrastructureConfiguration_create.ThreeTier.centralServer.instanceCount", "options": ["instance-count"], "required": true, "help": {"short": "The number of central server VMs."}}, {"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.centralServer.subnetId", "options": ["subnet-id"], "required": true, "help": {"short": "The subnet id."}}, {"type": "@VirtualMachineConfiguration_create", "var": "@InfrastructureConfiguration_create.ThreeTier.centralServer.virtualMachineConfiguration", "options": ["virtual-machine-configuration"], "required": true, "help": {"short": "Gets or sets the virtual machine configuration."}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames", "options": ["custom-resource-names"], "help": {"short": "The set of custom names to be used for underlying azure resources that are part of the SAP system."}, "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName", "options": ["full-resource-name"], "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.applicationServer", "options": ["application-server"], "help": {"short": "The full resource names object for application layer resources. The number of entries in this list should be equal to the number VMs to be created for application layer."}, "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.applicationServer.availabilitySetName", "options": ["availability-set-name"], "help": {"short": "The full name for availability set. In case name is not provided, it will be defaulted to {SID}-App-AvSet."}}, {"type": "array<@VirtualMachineResourceNames_create>", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.applicationServer.virtualMachines", "options": ["virtual-machines"], "help": {"short": "The list of virtual machine naming details."}, "item": {"type": "@VirtualMachineResourceNames_create"}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer", "options": ["central-server"], "help": {"short": "The full resource names object for central server layer resources."}, "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer.availabilitySetName", "options": ["availability-set-name"], "help": {"short": "The full name for availability set. In case name is not provided, it will be defaulted to {SID}-ASCS-AvSet."}}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer.loadBalancer", "options": ["load-balancer"], "help": {"short": "The resource names object for load balancer and related resources."}, "args": [{"type": "array<string>", "var": "@LoadBalancerResourceNames_create.backendPoolNames", "options": ["backend-pool-names"], "help": {"short": "The list of backend pool names. Currently, ACSS deploys only one backend pool and hence, size of this list should be 1"}, "item": {"type": "string"}}, {"type": "array<string>", "var": "@LoadBalancerResourceNames_create.frontendIpConfigurationNames", "options": ["frontend-ip-configuration-names"], "help": {"short": "The list of frontend IP configuration names. If provided as input, size of this list should be 2 for cs layer and should be 1 for database layer."}, "item": {"type": "string"}}, {"type": "array<string>", "var": "@LoadBalancerResourceNames_create.healthProbeNames", "options": ["health-probe-names"], "help": {"short": "The list of health probe names. If provided as input, size of this list should be 2 for cs layer and should be 1 for database layer."}, "item": {"type": "string"}}, {"type": "string", "var": "@LoadBalancerResourceNames_create.loadBalancerName", "options": ["load-balancer-name"], "help": {"short": "The full resource name for load balancer. If this value is not provided, load balancer will be name as {ASCS/DB}-loadBalancer."}}], "cls": "LoadBalancerResourceNames_create"}, {"type": "array<@VirtualMachineResourceNames_create>", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer.virtualMachines", "options": ["virtual-machines"], "help": {"short": "The list of names for all ASCS virtual machines to be deployed. The number of entries in this list should be equal to the number VMs to be created for ASCS layer. At maximum, there can be two virtual machines at this layer: ASCS and ERS."}, "item": {"type": "@VirtualMachineResourceNames_create"}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer", "options": ["database-server"], "help": {"short": "The full resource names object for database layer resources. The number of entries in this list should be equal to the number VMs to be created for database layer."}, "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer.availabilitySetName", "options": ["availability-set-name"], "help": {"short": "The full name for availability set. In case name is not provided, it will be defaulted to {SID}-DB-AvSet."}}, {"type": "@LoadBalancerResourceNames_create", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer.loadBalancer", "options": ["load-balancer"], "help": {"short": "The resource names object for load balancer and related resources."}}, {"type": "array<@VirtualMachineResourceNames_create>", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer.virtualMachines", "options": ["virtual-machines"], "help": {"short": "The list of virtual machine naming details."}, "item": {"type": "@VirtualMachineResourceNames_create"}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.sharedStorage", "options": ["shared-storage"], "help": {"short": "The resource names object for shared storage."}, "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.sharedStorage.sharedStorageAccountName", "options": ["shared-storage-account-name"], "help": {"short": "The full name of the shared storage account. If it is not provided, it will be defaulted to {SID}nfs{guid of 15 chars}."}}, {"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.sharedStorage.sharedStorageAccountPrivateEndPointName", "options": ["shared-storage-account-private-end-point-name"], "help": {"short": "The full name of private end point for the shared storage account. If it is not provided, it will be defaulted to {storageAccountName}_pe"}}]}]}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.databaseServer", "options": ["database-server"], "required": true, "help": {"short": "The database configuration."}, "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.databaseType", "options": ["database-type"], "help": {"short": "The database type."}, "enum": {"items": [{"name": "DB2", "value": "DB2"}, {"name": "HANA", "value": "HANA"}]}}, {"type": "@DiskConfiguration_create", "var": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.diskConfiguration", "options": ["disk-configuration"], "help": {"short": "Gets or sets the disk configuration."}}, {"type": "integer64", "var": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.instanceCount", "options": ["instance-count"], "required": true, "help": {"short": "The number of database VMs."}}, {"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.subnetId", "options": ["subnet-id"], "required": true, "help": {"short": "The subnet id."}}, {"type": "@VirtualMachineConfiguration_create", "var": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.virtualMachineConfiguration", "options": ["virtual-machine-configuration"], "required": true, "help": {"short": "Gets or sets the virtual machine configuration."}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.highAvailabilityConfig", "options": ["high-availability-config"], "help": {"short": "The high availability configuration."}, "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.highAvailabilityConfig.highAvailabilityType", "options": ["high-availability-type"], "required": true, "help": {"short": "The high availability type."}, "enum": {"items": [{"name": "AvailabilitySet", "value": "AvailabilitySet"}, {"name": "AvailabilityZone", "value": "AvailabilityZone"}]}}]}, {"type": "@NetworkConfiguration_create", "var": "@InfrastructureConfiguration_create.ThreeTier.networkConfiguration", "options": ["network-configuration"], "help": {"short": "Network configuration common to all servers"}}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration", "options": ["storage-configuration"], "help": {"short": "The storage configuration."}, "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration", "options": ["transport-file-share-configuration"], "help": {"short": "The properties of the transport directory attached to the VIS. The default for transportFileShareConfiguration is the createAndMount flow if storage configuration is missing."}, "args": [{"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.CreateAndMount", "options": ["create-and-mount"], "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.CreateAndMount.resourceGroup", "options": ["resource-group"], "help": {"short": "The name of transport file share resource group. This should be pre created by the customer. The app rg is used in case of missing input."}}, {"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.CreateAndMount.storageAccountName", "options": ["storage-account-name"], "help": {"short": "The name of file share storage account name . A custom name is used in case of missing input."}}]}, {"type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Mount", "options": ["mount"], "args": [{"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Mount.id", "options": ["id"], "required": true, "help": {"short": "The fileshare resource ID"}}, {"type": "string", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Mount.privateEndpointId", "options": ["private-endpoint-id"], "required": true, "help": {"short": "The private endpoint resource ID"}}]}, {"blank": {"value": {}}, "type": "object", "var": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Skip", "options": ["skip"]}]}]}]}, {"type": "string", "var": "@InfrastructureConfiguration_create.appResourceGroup", "options": ["app-resource-group"], "required": true, "help": {"short": "The application resource group where SAP system resources will be deployed."}}], "cls": "InfrastructureConfiguration_create"}, {"type": "object", "var": "$resource.properties.configuration.Deployment.softwareConfiguration", "options": ["software-configuration"], "help": {"short": "The software configuration."}, "args": [{"type": "object", "var": "@SoftwareConfiguration_create.External", "options": ["external"], "args": [{"type": "string", "var": "@SoftwareConfiguration_create.External.centralServerVmId", "options": ["central-server-vm-id"], "help": {"short": "The resource ID of the virtual machine containing the central server instance."}}]}, {"type": "object", "var": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig", "options": ["sap-install-without-os-config"], "args": [{"type": "string", "var": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.bomUrl", "options": ["bom-url"], "required": true, "help": {"short": "The URL to the SAP Build of Materials(BOM) file."}}, {"type": "object", "var": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.highAvailabilitySoftwareConfiguration", "options": ["high-availability-software-configuration"], "help": {"short": "Gets or sets the HA software configuration."}, "args": [{"type": "string", "var": "@HighAvailabilitySoftwareConfiguration_create.fencingClientId", "options": ["fencing-client-id"], "required": true, "help": {"short": "The fencing client id."}}, {"type": "password", "var": "@HighAvailabilitySoftwareConfiguration_create.fencingClientPassword", "options": ["fencing-client-password"], "required": true, "help": {"short": "The fencing client id secret/password. The secret should never expire. This will be used pacemaker to start/stop the cluster VMs."}, "prompt": {"msg": "Password:"}}], "cls": "HighAvailabilitySoftwareConfiguration_create"}, {"type": "string", "var": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.sapBitsStorageAccountId", "options": ["sap-bits-storage-account-id"], "required": true, "help": {"short": "The SAP bits storage account id."}}, {"type": "string", "var": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.softwareVersion", "options": ["software-version"], "required": true, "help": {"short": "The software version to install."}}]}, {"type": "object", "var": "@SoftwareConfiguration_create.ServiceInitiated", "options": ["service-initiated"], "args": [{"type": "string", "var": "@SoftwareConfiguration_create.ServiceInitiated.bomUrl", "options": ["bom-url"], "required": true, "help": {"short": "The URL to the SAP Build of Materials(BOM) file."}}, {"type": "@HighAvailabilitySoftwareConfiguration_create", "var": "@SoftwareConfiguration_create.ServiceInitiated.highAvailabilitySoftwareConfiguration", "options": ["high-availability-software-configuration"], "help": {"short": "Gets or sets the HA software configuration."}}, {"type": "string", "var": "@SoftwareConfiguration_create.ServiceInitiated.sapBitsStorageAccountId", "options": ["sap-bits-storage-account-id"], "required": true, "help": {"short": "The SAP bits storage account id."}}, {"type": "string", "var": "@SoftwareConfiguration_create.ServiceInitiated.sapFqdn", "options": ["sap-fqdn"], "required": true, "help": {"short": "The FQDN to set for the SAP system during install."}}, {"type": "string", "var": "@SoftwareConfiguration_create.ServiceInitiated.softwareVersion", "options": ["software-version"], "required": true, "help": {"short": "The software version to install."}}, {"type": "password", "var": "@SoftwareConfiguration_create.ServiceInitiated.sshPrivateKey", "options": ["ssh-private-key"], "required": true, "help": {"short": "The SSH private key."}, "prompt": {"msg": "Password:"}}]}], "cls": "SoftwareConfiguration_create"}]}, {"type": "object", "var": "$resource.properties.configuration.DeploymentWithOSConfig", "options": ["deployment-with-os-config"], "hide": true, "group": "Configuration", "help": {"short": "deployment with os config"}, "args": [{"type": "string", "var": "$resource.properties.configuration.DeploymentWithOSConfig.appLocation", "options": ["app-location"], "help": {"short": "The geo-location where the SAP system is to be created."}}, {"type": "@InfrastructureConfiguration_create", "var": "$resource.properties.configuration.DeploymentWithOSConfig.infrastructureConfiguration", "options": ["infrastructure-configuration"], "help": {"short": "The infrastructure configuration."}}, {"type": "object", "var": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration", "options": ["os-sap-configuration"], "help": {"short": "The OS and SAP configuration."}, "args": [{"type": "object", "var": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.deployerVmPackages", "options": ["deployer-vm-packages"], "help": {"short": "The url and storage account ID where deployer VM packages are uploaded"}, "args": [{"type": "string", "var": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.deployerVmPackages.storageAccountId", "options": ["storage-account-id"], "help": {"short": "The deployer VM packages storage account id"}}, {"type": "string", "var": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.deployerVmPackages.url", "options": ["url"], "help": {"short": "The URL to the deployer VM packages file."}}]}, {"type": "string", "var": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.sapFqdn", "options": ["sap-fqdn"], "help": {"short": "The FQDN to set for the SAP system"}}]}, {"type": "@SoftwareConfiguration_create", "var": "$resource.properties.configuration.DeploymentWithOSConfig.softwareConfiguration", "options": ["software-configuration"], "help": {"short": "The software configuration."}}]}, {"type": "object", "var": "$resource.properties.configuration.Discovery", "options": ["discovery-org"], "group": "Configuration", "help": {"short": "discovery"}, "args": [{"type": "string", "var": "$resource.properties.configuration.Discovery.centralServerVmId", "options": ["central-server-vm-id"], "help": {"short": "The virtual machine ID of the Central Server."}}, {"type": "string", "var": "$resource.properties.configuration.Discovery.managedRgStorageAccountName", "options": ["managed-rg-storage-account-name"], "help": {"short": "The custom storage account name for the storage account created by the service in the managed resource group created as part of VIS deployment.<br><br>Refer to the storage account naming rules [here](https://learn.microsoft.com/azure/azure-resource-manager/management/resource-name-rules#microsoftstorage).<br><br>If not provided, the service will create the storage account with a random name."}, "format": {"maxLength": 24, "minLength": 3}}]}]}, {"name": "ManagedResourceGroupConfiguration", "args": [{"type": "string", "var": "$resource.properties.managedResourceGroupConfiguration.name", "options": ["managed-rg-name"], "group": "ManagedResourceGroupConfiguration", "help": {"short": "Managed resource group name"}}]}, {"name": "Properties", "args": [{"type": "string", "var": "$resource.properties.environment", "options": ["environment"], "group": "Properties", "help": {"short": "Defines the environment type - Production/Non Production."}, "enum": {"items": [{"name": "NonProd", "value": "NonProd"}, {"name": "Prod", "value": "Prod"}]}}, {"type": "string", "var": "$resource.properties.managedResourcesNetworkAccessType", "options": ["mrg-network-access-typ", "managed-resources-network-access-type"], "group": "Properties", "help": {"short": "Specifies the network access configuration for the resources that will be deployed in the Managed Resource Group. The options to choose from are Public and Private. If 'Private' is chosen, the Storage Account service tag should be enabled on the subnets in which the SAP VMs exist. This is required for establishing connectivity between VM extensions and the managed resource group storage account. This setting is currently applicable only to Storage Account. Learn more here https://go.microsoft.com/fwlink/?linkid=2247228"}, "enum": {"items": [{"name": "Private", "value": "Private"}, {"name": "Public", "value": "Public"}]}}, {"type": "string", "var": "$resource.properties.sapProduct", "options": ["sap-product"], "group": "Properties", "help": {"short": "Defines the SAP Product type."}, "enum": {"items": [{"name": "ECC", "value": "ECC"}, {"name": "Other", "value": "Other"}, {"name": "S4HANA", "value": "S4HANA"}]}}]}, {"name": "Resource", "args": [{"type": "object", "var": "$resource.identity", "options": ["identity"], "group": "Resource", "help": {"short": "The managed service identities assigned to this resource."}, "args": [{"type": "string", "var": "$resource.identity.type", "options": ["type"], "required": true, "help": {"short": "Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed)."}, "enum": {"items": [{"name": "None", "value": "None"}, {"name": "UserAssigned", "value": "UserAssigned"}]}}, {"type": "object", "var": "$resource.identity.userAssignedIdentities", "options": ["user-assigned-identities"], "help": {"short": "The set of user assigned identities associated with the resource. The userAssignedIdentities dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}. The dictionary values can be empty objects ({}) in requests."}, "additionalProps": {"item": {"nullable": true, "blank": {"value": {}}, "type": "object"}}}]}, {"type": "ResourceLocation", "var": "$resource.location", "options": ["l", "location"], "required": true, "group": "Resource", "help": {"short": "The geo-location where the resource lives"}}, {"type": "object", "var": "$resource.tags", "options": ["tags"], "group": "Resource", "help": {"short": "Resource tags."}, "additionalProps": {"item": {"type": "string"}}}]}], "operations": [{"longRunning": {"finalStateVia": "azure-async-operation"}, "operationId": "SapVirtualInstances_Create", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Workloads/sapVirtualInstances/{sapVirtualInstanceName}", "request": {"method": "put", "path": {"params": [{"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true, "format": {"maxLength": 90, "minLength": 1}}, {"type": "string", "name": "sapVirtualInstanceName", "arg": "$Path.sapVirtualInstanceName", "required": true, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "uuid", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-09-01"}, "type": "string", "name": "api-version", "required": true, "format": {"minLength": 1}}]}, "body": {"json": {"schema": {"type": "object", "name": "resource", "required": true, "props": [{"type": "IdentityObject", "name": "identity", "arg": "$resource.identity", "props": [{"type": "string", "name": "type", "arg": "$resource.identity.type", "required": true, "enum": {"items": [{"value": "None"}, {"value": "UserAssigned"}]}}, {"type": "object", "name": "userAssignedIdentities", "arg": "$resource.identity.userAssignedIdentities", "additionalProps": {"item": {"nullable": true, "type": "object"}}}]}, {"type": "ResourceLocation", "name": "location", "arg": "$resource.location", "required": true}, {"type": "object", "name": "properties", "props": [{"type": "object", "name": "configuration", "required": true, "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"arg": "$resource.properties.configuration.Deployment", "value": "Deployment"}, {"arg": "$resource.properties.configuration.DeploymentWithOSConfig", "value": "DeploymentWithOSConfig"}, {"arg": "$resource.properties.configuration.Discovery", "value": "Discovery"}]}}], "discriminators": [{"property": "configurationType", "value": "Deployment", "props": [{"type": "string", "name": "appLocation", "arg": "$resource.properties.configuration.Deployment.appLocation"}, {"type": "object", "name": "infrastructureConfiguration", "arg": "$resource.properties.configuration.Deployment.infrastructureConfiguration", "props": [{"type": "string", "name": "appResourceGroup", "arg": "@InfrastructureConfiguration_create.appResourceGroup", "required": true}, {"type": "string", "name": "deploymentType", "required": true, "enum": {"items": [{"arg": "@InfrastructureConfiguration_create.SingleServer", "value": "SingleServer"}, {"arg": "@InfrastructureConfiguration_create.ThreeTier", "value": "ThreeTier"}]}}], "discriminators": [{"property": "deploymentType", "value": "SingleServer", "props": [{"type": "object", "name": "customResourceNames", "arg": "@InfrastructureConfiguration_create.SingleServer.customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"arg": "@InfrastructureConfiguration_create.SingleServer.customResourceNames.FullResourceName", "value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "virtualMachine", "arg": "@InfrastructureConfiguration_create.SingleServer.customResourceNames.FullResourceName.virtualMachine", "props": [{"type": "object", "name": "dataDiskNames", "arg": "@VirtualMachineResourceNames_create.dataDiskNames", "additionalProps": {"item": {"type": "array<string>", "item": {"type": "string"}}}}, {"type": "string", "name": "hostName", "arg": "@VirtualMachineResourceNames_create.hostName"}, {"type": "array<object>", "name": "networkInterfaces", "arg": "@VirtualMachineResourceNames_create.networkInterfaces", "item": {"type": "object", "props": [{"type": "string", "name": "networkInterfaceName", "arg": "@VirtualMachineResourceNames_create.networkInterfaces[].networkInterfaceName"}]}}, {"type": "string", "name": "osDiskName", "arg": "@VirtualMachineResourceNames_create.osDiskName"}, {"type": "string", "name": "vmName", "arg": "@VirtualMachineResourceNames_create.vmName"}], "cls": "VirtualMachineResourceNames_create"}]}]}, {"type": "string", "name": "databaseType", "arg": "@InfrastructureConfiguration_create.SingleServer.databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "object", "name": "dbDiskConfiguration", "arg": "@InfrastructureConfiguration_create.SingleServer.dbDiskConfiguration", "props": [{"type": "object", "name": "diskVolumeConfigurations", "arg": "@DiskConfiguration_create.diskVolumeConfigurations", "additionalProps": {"item": {"type": "object", "props": [{"type": "integer64", "name": "count", "arg": "@DiskConfiguration_create.diskVolumeConfigurations{}.count"}, {"type": "integer64", "name": "sizeGB", "arg": "@DiskConfiguration_create.diskVolumeConfigurations{}.sizeGB"}, {"type": "object", "name": "sku", "arg": "@DiskConfiguration_create.diskVolumeConfigurations{}.sku", "props": [{"type": "string", "name": "name", "arg": "@DiskConfiguration_create.diskVolumeConfigurations{}.sku.name", "enum": {"items": [{"value": "PremiumV2_LRS"}, {"value": "Premium_LRS"}, {"value": "Premium_ZRS"}, {"value": "StandardSSD_LRS"}, {"value": "StandardSSD_ZRS"}, {"value": "Standard_LRS"}, {"value": "UltraSSD_LRS"}]}}]}]}}}], "cls": "DiskConfiguration_create"}, {"type": "object", "name": "networkConfiguration", "arg": "@InfrastructureConfiguration_create.SingleServer.networkConfiguration", "props": [{"default": {"value": false}, "type": "boolean", "name": "isSecondaryIpEnabled", "arg": "@NetworkConfiguration_create.isSecondaryIpEnabled"}], "cls": "NetworkConfiguration_create"}, {"type": "string", "name": "subnetId", "arg": "@InfrastructureConfiguration_create.SingleServer.subnetId", "required": true}, {"type": "object", "name": "virtualMachineConfiguration", "arg": "@InfrastructureConfiguration_create.SingleServer.virtualMachineConfiguration", "required": true, "props": [{"type": "object", "name": "imageReference", "arg": "@VirtualMachineConfiguration_create.imageReference", "required": true, "props": [{"type": "ResourceId", "name": "id", "arg": "@VirtualMachineConfiguration_create.imageReference.id"}, {"type": "string", "name": "offer", "arg": "@VirtualMachineConfiguration_create.imageReference.offer"}, {"type": "string", "name": "publisher", "arg": "@VirtualMachineConfiguration_create.imageReference.publisher"}, {"type": "string", "name": "sku", "arg": "@VirtualMachineConfiguration_create.imageReference.sku"}, {"type": "string", "name": "version", "arg": "@VirtualMachineConfiguration_create.imageReference.version"}]}, {"type": "object", "name": "osProfile", "arg": "@VirtualMachineConfiguration_create.osProfile", "required": true, "props": [{"type": "password", "name": "adminPassword", "arg": "@VirtualMachineConfiguration_create.osProfile.adminPassword", "secret": true}, {"type": "string", "name": "adminUsername", "arg": "@VirtualMachineConfiguration_create.osProfile.adminUsername"}, {"type": "object", "name": "osConfiguration", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration", "props": [{"type": "string", "name": "osType", "required": true, "enum": {"items": [{"arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux", "value": "Linux"}, {"arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Windows", "value": "Windows"}]}}], "discriminators": [{"property": "osType", "value": "Linux", "props": [{"type": "boolean", "name": "disablePasswordAuthentication", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.disablePasswordAuthentication"}, {"type": "object", "name": "ssh", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.ssh", "props": [{"type": "array<object>", "name": "publicKeys", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.ssh.publicKeys", "item": {"type": "object", "props": [{"type": "string", "name": "keyData", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.ssh.publicKeys[].keyData"}]}}]}, {"type": "object", "name": "sshKeyPair", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.sshKeyPair", "props": [{"type": "password", "name": "privateKey", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.sshKeyPair.privateKey", "secret": true}, {"type": "string", "name": "publicKey", "arg": "@VirtualMachineConfiguration_create.osProfile.osConfiguration.Linux.sshKeyPair.publicKey"}]}]}, {"property": "osType", "value": "Windows"}]}]}, {"type": "string", "name": "vmSize", "arg": "@VirtualMachineConfiguration_create.vmSize", "required": true}], "cls": "VirtualMachineConfiguration_create"}]}, {"property": "deploymentType", "value": "ThreeTier", "props": [{"type": "object", "name": "applicationServer", "arg": "@InfrastructureConfiguration_create.ThreeTier.applicationServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "arg": "@InfrastructureConfiguration_create.ThreeTier.applicationServer.instanceCount", "required": true}, {"type": "string", "name": "subnetId", "arg": "@InfrastructureConfiguration_create.ThreeTier.applicationServer.subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_create", "name": "virtualMachineConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.applicationServer.virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "centralServer", "arg": "@InfrastructureConfiguration_create.ThreeTier.centralServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "arg": "@InfrastructureConfiguration_create.ThreeTier.centralServer.instanceCount", "required": true}, {"type": "string", "name": "subnetId", "arg": "@InfrastructureConfiguration_create.ThreeTier.centralServer.subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_create", "name": "virtualMachineConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.centralServer.virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "customResourceNames", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName", "value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "applicationServer", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.applicationServer", "props": [{"type": "string", "name": "availabilitySetName", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.applicationServer.availabilitySetName"}, {"type": "array<@VirtualMachineResourceNames_create>", "name": "virtualMachines", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.applicationServer.virtualMachines", "item": {"type": "@VirtualMachineResourceNames_create"}}]}, {"type": "object", "name": "centralServer", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer", "props": [{"type": "string", "name": "availabilitySetName", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer.availabilitySetName"}, {"type": "object", "name": "loadBalancer", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer.loadBalancer", "props": [{"type": "array<string>", "name": "backendPoolNames", "arg": "@LoadBalancerResourceNames_create.backendPoolNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "frontendIpConfigurationNames", "arg": "@LoadBalancerResourceNames_create.frontendIpConfigurationNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "healthProbeNames", "arg": "@LoadBalancerResourceNames_create.healthProbeNames", "item": {"type": "string"}}, {"type": "string", "name": "loadBalancerName", "arg": "@LoadBalancerResourceNames_create.loadBalancerName"}], "cls": "LoadBalancerResourceNames_create"}, {"type": "array<@VirtualMachineResourceNames_create>", "name": "virtualMachines", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.centralServer.virtualMachines", "item": {"type": "@VirtualMachineResourceNames_create"}}]}, {"type": "object", "name": "databaseServer", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer", "props": [{"type": "string", "name": "availabilitySetName", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer.availabilitySetName"}, {"type": "@LoadBalancerResourceNames_create", "name": "loadBalancer", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer.loadBalancer"}, {"type": "array<@VirtualMachineResourceNames_create>", "name": "virtualMachines", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.databaseServer.virtualMachines", "item": {"type": "@VirtualMachineResourceNames_create"}}]}, {"type": "object", "name": "sharedStorage", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.sharedStorage", "props": [{"type": "string", "name": "sharedStorageAccountName", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.sharedStorage.sharedStorageAccountName"}, {"type": "string", "name": "sharedStorageAccountPrivateEndPointName", "arg": "@InfrastructureConfiguration_create.ThreeTier.customResourceNames.FullResourceName.sharedStorage.sharedStorageAccountPrivateEndPointName"}]}]}]}, {"type": "object", "name": "databaseServer", "arg": "@InfrastructureConfiguration_create.ThreeTier.databaseServer", "required": true, "props": [{"type": "string", "name": "databaseType", "arg": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "@DiskConfiguration_create", "name": "diskConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.diskConfiguration"}, {"type": "integer64", "name": "instanceCount", "arg": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.instanceCount", "required": true}, {"type": "string", "name": "subnetId", "arg": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_create", "name": "virtualMachineConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.databaseServer.virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "highAvailabilityConfig", "arg": "@InfrastructureConfiguration_create.ThreeTier.highAvailabilityConfig", "props": [{"type": "string", "name": "highAvailabilityType", "arg": "@InfrastructureConfiguration_create.ThreeTier.highAvailabilityConfig.highAvailabilityType", "required": true, "enum": {"items": [{"value": "AvailabilitySet"}, {"value": "AvailabilityZone"}]}}]}, {"type": "@NetworkConfiguration_create", "name": "networkConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.networkConfiguration"}, {"type": "object", "name": "storageConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration", "props": [{"type": "object", "name": "transportFileShareConfiguration", "arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration", "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.CreateAndMount", "value": "CreateAndMount"}, {"arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Mount", "value": "Mount"}, {"arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Skip", "value": "Skip"}]}}], "discriminators": [{"property": "configurationType", "value": "CreateAndMount", "props": [{"type": "string", "name": "resourceGroup", "arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.CreateAndMount.resourceGroup"}, {"type": "string", "name": "storageAccountName", "arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.CreateAndMount.storageAccountName"}]}, {"property": "configurationType", "value": "Mount", "props": [{"type": "string", "name": "id", "arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Mount.id", "required": true}, {"type": "string", "name": "privateEndpointId", "arg": "@InfrastructureConfiguration_create.ThreeTier.storageConfiguration.transportFileShareConfiguration.Mount.privateEndpointId", "required": true}]}, {"property": "configurationType", "value": "Skip"}]}]}]}], "cls": "InfrastructureConfiguration_create"}, {"type": "object", "name": "softwareConfiguration", "arg": "$resource.properties.configuration.Deployment.softwareConfiguration", "props": [{"type": "string", "name": "softwareInstallationType", "required": true, "enum": {"items": [{"arg": "@SoftwareConfiguration_create.External", "value": "External"}, {"arg": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig", "value": "SAPInstallWithoutOSConfig"}, {"arg": "@SoftwareConfiguration_create.ServiceInitiated", "value": "ServiceInitiated"}]}}], "discriminators": [{"property": "softwareInstallationType", "value": "External", "props": [{"type": "string", "name": "centralServerVmId", "arg": "@SoftwareConfiguration_create.External.centralServerVmId"}]}, {"property": "softwareInstallationType", "value": "SAPInstallWithoutOSConfig", "props": [{"type": "string", "name": "bomUrl", "arg": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.bomUrl", "required": true}, {"type": "object", "name": "highAvailabilitySoftwareConfiguration", "arg": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.highAvailabilitySoftwareConfiguration", "props": [{"type": "string", "name": "fencingClientId", "arg": "@HighAvailabilitySoftwareConfiguration_create.fencingClientId", "required": true}, {"type": "password", "name": "fencingClientPassword", "arg": "@HighAvailabilitySoftwareConfiguration_create.fencingClientPassword", "required": true, "secret": true}], "cls": "HighAvailabilitySoftwareConfiguration_create"}, {"type": "string", "name": "sapBitsStorageAccountId", "arg": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "softwareVersion", "arg": "@SoftwareConfiguration_create.SAPInstallWithoutOSConfig.softwareVersion", "required": true}]}, {"property": "softwareInstallationType", "value": "ServiceInitiated", "props": [{"type": "string", "name": "bomUrl", "arg": "@SoftwareConfiguration_create.ServiceInitiated.bomUrl", "required": true}, {"type": "@HighAvailabilitySoftwareConfiguration_create", "name": "highAvailabilitySoftwareConfiguration", "arg": "@SoftwareConfiguration_create.ServiceInitiated.highAvailabilitySoftwareConfiguration"}, {"type": "string", "name": "sapBitsStorageAccountId", "arg": "@SoftwareConfiguration_create.ServiceInitiated.sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "sapFqdn", "arg": "@SoftwareConfiguration_create.ServiceInitiated.sapFqdn", "required": true}, {"type": "string", "name": "softwareVersion", "arg": "@SoftwareConfiguration_create.ServiceInitiated.softwareVersion", "required": true}, {"type": "password", "name": "sshPrivateKey", "arg": "@SoftwareConfiguration_create.ServiceInitiated.sshPrivateKey", "required": true, "secret": true}]}], "cls": "SoftwareConfiguration_create"}]}, {"property": "configurationType", "value": "DeploymentWithOSConfig", "props": [{"type": "string", "name": "appLocation", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.appLocation"}, {"type": "@InfrastructureConfiguration_create", "name": "infrastructureConfiguration", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.infrastructureConfiguration"}, {"type": "object", "name": "osSapConfiguration", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration", "props": [{"type": "object", "name": "deployerVmPackages", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.deployerVmPackages", "props": [{"type": "string", "name": "storageAccountId", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.deployerVmPackages.storageAccountId"}, {"type": "string", "name": "url", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.deployerVmPackages.url"}]}, {"type": "string", "name": "sapFqdn", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.osSapConfiguration.sapFqdn"}]}, {"type": "@SoftwareConfiguration_create", "name": "softwareConfiguration", "arg": "$resource.properties.configuration.DeploymentWithOSConfig.softwareConfiguration"}]}, {"property": "configurationType", "value": "Discovery", "props": [{"type": "string", "name": "centralServerVmId", "arg": "$resource.properties.configuration.Discovery.centralServerVmId"}, {"type": "string", "name": "managedRgStorageAccountName", "arg": "$resource.properties.configuration.Discovery.managedRgStorageAccountName", "format": {"maxLength": 24, "minLength": 3}}]}]}, {"type": "string", "name": "environment", "arg": "$resource.properties.environment", "required": true, "enum": {"items": [{"value": "NonProd"}, {"value": "Prod"}]}}, {"type": "object", "name": "managedResourceGroupConfiguration", "props": [{"type": "string", "name": "name", "arg": "$resource.properties.managedResourceGroupConfiguration.name"}]}, {"type": "string", "name": "managedResourcesNetworkAccessType", "arg": "$resource.properties.managedResourcesNetworkAccessType", "enum": {"items": [{"value": "Private"}, {"value": "Public"}]}}, {"type": "string", "name": "sapProduct", "arg": "$resource.properties.sapProduct", "required": true, "enum": {"items": [{"value": "ECC"}, {"value": "Other"}, {"value": "S4HANA"}]}}], "clientFlatten": true}, {"type": "object", "name": "tags", "arg": "$resource.tags", "additionalProps": {"item": {"type": "string"}}}], "clientFlatten": true}}}}, "responses": [{"statusCode": [200, 201], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "ResourceId", "name": "id", "format": {"template": "/subscriptions/{}/resourceGroups/{}/providers/Microsoft.Workloads/sapVirtualInstances/{}"}}, {"type": "IdentityObject", "name": "identity", "props": [{"type": "string", "name": "type", "required": true, "enum": {"items": [{"value": "None"}, {"value": "UserAssigned"}]}}, {"type": "object", "name": "userAssignedIdentities", "additionalProps": {"item": {"nullable": true, "type": "object", "props": [{"readOnly": true, "type": "uuid", "name": "clientId"}, {"readOnly": true, "type": "uuid", "name": "principalId"}]}}}]}, {"type": "ResourceLocation", "name": "location", "required": true}, {"readOnly": true, "type": "string", "name": "name"}, {"type": "object", "name": "properties", "props": [{"type": "object", "name": "configuration", "required": true, "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"value": "Deployment"}, {"value": "DeploymentWithOSConfig"}, {"value": "Discovery"}]}}], "discriminators": [{"property": "configurationType", "value": "Deployment", "props": [{"type": "string", "name": "appLocation"}, {"type": "object", "name": "infrastructureConfiguration", "props": [{"type": "string", "name": "appResourceGroup", "required": true}, {"type": "string", "name": "deploymentType", "required": true, "enum": {"items": [{"value": "SingleServer"}, {"value": "ThreeTier"}]}}], "discriminators": [{"property": "deploymentType", "value": "SingleServer", "props": [{"type": "object", "name": "customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "virtualMachine", "props": [{"type": "object", "name": "dataDiskNames", "additionalProps": {"item": {"type": "array<string>", "item": {"type": "string"}}}}, {"type": "string", "name": "hostName"}, {"type": "array<object>", "name": "networkInterfaces", "item": {"type": "object", "props": [{"type": "string", "name": "networkInterfaceName"}]}}, {"type": "string", "name": "osDiskName"}, {"type": "string", "name": "vmName"}], "cls": "VirtualMachineResourceNames_read"}]}]}, {"type": "string", "name": "databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "object", "name": "dbDiskConfiguration", "props": [{"type": "object", "name": "diskVolumeConfigurations", "additionalProps": {"item": {"type": "object", "props": [{"type": "integer64", "name": "count"}, {"type": "integer64", "name": "sizeGB"}, {"type": "object", "name": "sku", "props": [{"type": "string", "name": "name", "enum": {"items": [{"value": "PremiumV2_LRS"}, {"value": "Premium_LRS"}, {"value": "Premium_ZRS"}, {"value": "StandardSSD_LRS"}, {"value": "StandardSSD_ZRS"}, {"value": "Standard_LRS"}, {"value": "UltraSSD_LRS"}]}}]}]}}}], "cls": "DiskConfiguration_read"}, {"type": "object", "name": "networkConfiguration", "props": [{"default": {"value": false}, "type": "boolean", "name": "isSecondaryIpEnabled"}], "cls": "NetworkConfiguration_read"}, {"type": "string", "name": "subnetId", "required": true}, {"type": "object", "name": "virtualMachineConfiguration", "required": true, "props": [{"type": "object", "name": "imageReference", "required": true, "props": [{"type": "ResourceId", "name": "id"}, {"type": "string", "name": "offer"}, {"type": "string", "name": "publisher"}, {"type": "string", "name": "sku"}, {"type": "string", "name": "version"}]}, {"type": "object", "name": "osProfile", "required": true, "props": [{"type": "password", "name": "adminPassword", "secret": true}, {"type": "string", "name": "adminUsername"}, {"type": "object", "name": "osConfiguration", "props": [{"type": "string", "name": "osType", "required": true, "enum": {"items": [{"value": "Linux"}, {"value": "Windows"}]}}], "discriminators": [{"property": "osType", "value": "Linux", "props": [{"type": "boolean", "name": "disablePasswordAuthentication"}, {"type": "object", "name": "ssh", "props": [{"type": "array<object>", "name": "publicKeys", "item": {"type": "object", "props": [{"type": "string", "name": "keyData"}]}}]}, {"type": "object", "name": "sshKeyPair", "props": [{"type": "password", "name": "privateKey", "secret": true}, {"type": "string", "name": "publicKey"}]}]}, {"property": "osType", "value": "Windows"}]}]}, {"type": "string", "name": "vmSize", "required": true}], "cls": "VirtualMachineConfiguration_read"}]}, {"property": "deploymentType", "value": "ThreeTier", "props": [{"type": "object", "name": "applicationServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "centralServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "applicationServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "centralServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "object", "name": "loadBalancer", "props": [{"type": "array<string>", "name": "backendPoolNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "frontendIpConfigurationNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "healthProbeNames", "item": {"type": "string"}}, {"type": "string", "name": "loadBalancerName"}], "cls": "LoadBalancerResourceNames_read"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "databaseServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "@LoadBalancerResourceNames_read", "name": "loadBalancer"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "sharedStorage", "props": [{"type": "string", "name": "sharedStorageAccountName"}, {"type": "string", "name": "sharedStorageAccountPrivateEndPointName"}]}]}]}, {"type": "object", "name": "databaseServer", "required": true, "props": [{"type": "string", "name": "databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "@DiskConfiguration_read", "name": "diskConfiguration"}, {"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "highAvailabilityConfig", "props": [{"type": "string", "name": "highAvailabilityType", "required": true, "enum": {"items": [{"value": "AvailabilitySet"}, {"value": "AvailabilityZone"}]}}]}, {"type": "@NetworkConfiguration_read", "name": "networkConfiguration"}, {"type": "object", "name": "storageConfiguration", "props": [{"type": "object", "name": "transportFileShareConfiguration", "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"value": "CreateAndMount"}, {"value": "Mount"}, {"value": "Skip"}]}}], "discriminators": [{"property": "configurationType", "value": "CreateAndMount", "props": [{"type": "string", "name": "resourceGroup"}, {"type": "string", "name": "storageAccountName"}]}, {"property": "configurationType", "value": "Mount", "props": [{"type": "string", "name": "id", "required": true}, {"type": "string", "name": "privateEndpointId", "required": true}]}, {"property": "configurationType", "value": "Skip"}]}]}]}], "cls": "InfrastructureConfiguration_read"}, {"type": "object", "name": "softwareConfiguration", "props": [{"type": "string", "name": "softwareInstallationType", "required": true, "enum": {"items": [{"value": "External"}, {"value": "SAPInstallWithoutOSConfig"}, {"value": "ServiceInitiated"}]}}], "discriminators": [{"property": "softwareInstallationType", "value": "External", "props": [{"type": "string", "name": "centralServerVmId"}]}, {"property": "softwareInstallationType", "value": "SAPInstallWithoutOSConfig", "props": [{"type": "string", "name": "bomUrl", "required": true}, {"type": "object", "name": "highAvailabilitySoftwareConfiguration", "props": [{"type": "string", "name": "fencingClientId", "required": true}, {"type": "password", "name": "fencingClientPassword", "required": true, "secret": true}], "cls": "HighAvailabilitySoftwareConfiguration_read"}, {"type": "string", "name": "sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "softwareVersion", "required": true}]}, {"property": "softwareInstallationType", "value": "ServiceInitiated", "props": [{"type": "string", "name": "bomUrl", "required": true}, {"type": "@HighAvailabilitySoftwareConfiguration_read", "name": "highAvailabilitySoftwareConfiguration"}, {"type": "string", "name": "sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "sapFqdn", "required": true}, {"type": "string", "name": "softwareVersion", "required": true}, {"type": "password", "name": "sshPrivateKey", "required": true, "secret": true}]}], "cls": "SoftwareConfiguration_read"}]}, {"property": "configurationType", "value": "DeploymentWithOSConfig", "props": [{"type": "string", "name": "appLocation"}, {"type": "@InfrastructureConfiguration_read", "name": "infrastructureConfiguration"}, {"type": "object", "name": "osSapConfiguration", "props": [{"type": "object", "name": "deployerVmPackages", "props": [{"type": "string", "name": "storageAccountId"}, {"type": "string", "name": "url"}]}, {"type": "string", "name": "sapFqdn"}]}, {"type": "@SoftwareConfiguration_read", "name": "softwareConfiguration"}]}, {"property": "configurationType", "value": "Discovery", "props": [{"readOnly": true, "type": "string", "name": "appLocation"}, {"type": "string", "name": "centralServerVmId"}, {"type": "string", "name": "managedRgStorageAccountName", "format": {"maxLength": 24, "minLength": 3}}]}]}, {"type": "string", "name": "environment", "required": true, "enum": {"items": [{"value": "NonProd"}, {"value": "Prod"}]}}, {"readOnly": true, "type": "object", "name": "errors", "props": [{"type": "object", "name": "properties", "props": [{"readOnly": true, "type": "string", "name": "code"}, {"readOnly": true, "type": "array<@ErrorDefinition_read>", "name": "details", "item": {"type": "@ErrorDefinition_read"}}, {"readOnly": true, "type": "string", "name": "message"}], "cls": "ErrorDefinition_read"}]}, {"readOnly": true, "type": "string", "name": "health", "enum": {"items": [{"value": "Degraded"}, {"value": "Healthy"}, {"value": "Unhealthy"}, {"value": "Unknown"}]}}, {"type": "object", "name": "managedResourceGroupConfiguration", "props": [{"type": "string", "name": "name"}]}, {"type": "string", "name": "managedResourcesNetworkAccessType", "enum": {"items": [{"value": "Private"}, {"value": "Public"}]}}, {"readOnly": true, "type": "string", "name": "provisioningState", "enum": {"items": [{"value": "Canceled"}, {"value": "Creating"}, {"value": "Deleting"}, {"value": "Failed"}, {"value": "Succeeded"}, {"value": "Updating"}]}}, {"type": "string", "name": "sapProduct", "required": true, "enum": {"items": [{"value": "ECC"}, {"value": "Other"}, {"value": "S4HANA"}]}}, {"readOnly": true, "type": "string", "name": "state", "enum": {"items": [{"value": "ACSSInstallationBlocked"}, {"value": "DiscoveryFailed"}, {"value": "DiscoveryInProgress"}, {"value": "DiscoveryPending"}, {"value": "InfrastructureDeploymentFailed"}, {"value": "InfrastructureDeploymentInProgress"}, {"value": "InfrastructureDeploymentPending"}, {"value": "RegistrationComplete"}, {"value": "SoftwareDetectionFailed"}, {"value": "SoftwareDetectionInProgress"}, {"value": "SoftwareInstallationFailed"}, {"value": "SoftwareInstallationInProgress"}, {"value": "SoftwareInstallationPending"}]}}, {"readOnly": true, "type": "string", "name": "status", "enum": {"items": [{"value": "Offline"}, {"value": "PartiallyRunning"}, {"value": "Running"}, {"value": "SoftShutdown"}, {"value": "Starting"}, {"value": "Stopping"}, {"value": "Unavailable"}]}}], "clientFlatten": true}, {"readOnly": true, "type": "object", "name": "systemData", "props": [{"type": "dateTime", "name": "createdAt"}, {"type": "string", "name": "createdBy"}, {"type": "string", "name": "createdByType", "enum": {"items": [{"value": "Application"}, {"value": "Key"}, {"value": "ManagedIdentity"}, {"value": "User"}]}}, {"type": "dateTime", "name": "lastModifiedAt"}, {"type": "string", "name": "lastModifiedBy"}, {"type": "string", "name": "lastModifiedByType", "enum": {"items": [{"value": "Application"}, {"value": "Key"}, {"value": "ManagedIdentity"}, {"value": "User"}]}}]}, {"type": "object", "name": "tags", "additionalProps": {"item": {"type": "string"}}}, {"readOnly": true, "type": "string", "name": "type"}]}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@MgmtErrorFormat"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}], "confirmation": ""}, {"name": "update", "version": "2024-09-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.workloads/sapvirtualinstances/{}", "version": "2024-09-01", "swagger": "mgmt-plane/workloads/ResourceProviders/Microsoft.Workloads/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuV29ya2xvYWRzL3NhcFZpcnR1YWxJbnN0YW5jZXMve3NhcFZpcnR1YWxJbnN0YW5jZU5hbWV9/V/MjAyNC0wOS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "string", "var": "$Path.sapVirtualInstanceName", "options": ["n", "name", "sap-virtual-instance-name"], "required": true, "idPart": "name", "help": {"short": "The name of the Virtual Instances for SAP solutions resource"}, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}, {"name": "Properties", "args": [{"type": "object", "var": "$properties.identity", "options": ["identity"], "group": "Properties", "help": {"short": "Managed service identity (user assigned identities)"}, "args": [{"type": "string", "var": "$properties.identity.type", "options": ["type"], "required": true, "help": {"short": "Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed)."}, "enum": {"items": [{"name": "None", "value": "None"}, {"name": "UserAssigned", "value": "UserAssigned"}]}}, {"type": "object", "var": "$properties.identity.userAssignedIdentities", "options": ["user-assigned-identities"], "help": {"short": "The set of user assigned identities associated with the resource. The userAssignedIdentities dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}. The dictionary values can be empty objects ({}) in requests."}, "additionalProps": {"item": {"nullable": true, "blank": {"value": {}}, "type": "object"}}}]}, {"type": "string", "var": "$properties.properties.managedResourcesNetworkAccessType", "options": ["mrg-network-access-typ", "managed-resources-network-access-type"], "group": "Properties", "help": {"short": "Specifies the network access configuration for the resources that will be deployed in the Managed Resource Group. The options to choose from are Public and Private. If 'Private' is chosen, the Storage Account service tag should be enabled on the subnets in which the SAP VMs exist. This is required for establishing connectivity between VM extensions and the managed resource group storage account. This setting is currently applicable only to Storage Account. Learn more here https://go.microsoft.com/fwlink/?linkid=2247228"}, "default": {"value": "Public"}, "enum": {"items": [{"name": "Private", "value": "Private"}, {"name": "Public", "value": "Public"}]}}, {"type": "object", "var": "$properties.tags", "options": ["tags"], "group": "Properties", "help": {"short": "Gets or sets the Resource tags."}, "additionalProps": {"item": {"type": "string"}}}]}], "operations": [{"longRunning": {"finalStateVia": "location"}, "operationId": "SapVirtualInstances_Update", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Workloads/sapVirtualInstances/{sapVirtualInstanceName}", "request": {"method": "patch", "path": {"params": [{"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true, "format": {"maxLength": 90, "minLength": 1}}, {"type": "string", "name": "sapVirtualInstanceName", "arg": "$Path.sapVirtualInstanceName", "required": true, "format": {"pattern": "^[a-zA-Z][a-zA-Z0-9]{2}$"}}, {"type": "uuid", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-09-01"}, "type": "string", "name": "api-version", "required": true, "format": {"minLength": 1}}]}, "body": {"json": {"schema": {"type": "object", "name": "properties", "required": true, "props": [{"type": "IdentityObject", "name": "identity", "arg": "$properties.identity", "props": [{"type": "string", "name": "type", "arg": "$properties.identity.type", "required": true, "enum": {"items": [{"value": "None"}, {"value": "UserAssigned"}]}}, {"type": "object", "name": "userAssignedIdentities", "arg": "$properties.identity.userAssignedIdentities", "additionalProps": {"item": {"nullable": true, "type": "object"}}}]}, {"type": "object", "name": "properties", "props": [{"type": "string", "name": "managedResourcesNetworkAccessType", "arg": "$properties.properties.managedResourcesNetworkAccessType", "enum": {"items": [{"value": "Private"}, {"value": "Public"}]}}]}, {"type": "object", "name": "tags", "arg": "$properties.tags", "additionalProps": {"item": {"type": "string"}}}], "clientFlatten": true}}}}, "responses": [{"statusCode": [200], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "ResourceId", "name": "id", "format": {"template": "/subscriptions/{}/resourceGroups/{}/providers/Microsoft.Workloads/sapVirtualInstances/{}"}}, {"type": "IdentityObject", "name": "identity", "props": [{"type": "string", "name": "type", "required": true, "enum": {"items": [{"value": "None"}, {"value": "UserAssigned"}]}}, {"type": "object", "name": "userAssignedIdentities", "additionalProps": {"item": {"nullable": true, "type": "object", "props": [{"readOnly": true, "type": "uuid", "name": "clientId"}, {"readOnly": true, "type": "uuid", "name": "principalId"}]}}}]}, {"type": "ResourceLocation", "name": "location", "required": true}, {"readOnly": true, "type": "string", "name": "name"}, {"type": "object", "name": "properties", "props": [{"type": "object", "name": "configuration", "required": true, "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"value": "Deployment"}, {"value": "DeploymentWithOSConfig"}, {"value": "Discovery"}]}}], "discriminators": [{"property": "configurationType", "value": "Deployment", "props": [{"type": "string", "name": "appLocation"}, {"type": "object", "name": "infrastructureConfiguration", "props": [{"type": "string", "name": "appResourceGroup", "required": true}, {"type": "string", "name": "deploymentType", "required": true, "enum": {"items": [{"value": "SingleServer"}, {"value": "ThreeTier"}]}}], "discriminators": [{"property": "deploymentType", "value": "SingleServer", "props": [{"type": "object", "name": "customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "virtualMachine", "props": [{"type": "object", "name": "dataDiskNames", "additionalProps": {"item": {"type": "array<string>", "item": {"type": "string"}}}}, {"type": "string", "name": "hostName"}, {"type": "array<object>", "name": "networkInterfaces", "item": {"type": "object", "props": [{"type": "string", "name": "networkInterfaceName"}]}}, {"type": "string", "name": "osDiskName"}, {"type": "string", "name": "vmName"}], "cls": "VirtualMachineResourceNames_read"}]}]}, {"type": "string", "name": "databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "object", "name": "dbDiskConfiguration", "props": [{"type": "object", "name": "diskVolumeConfigurations", "additionalProps": {"item": {"type": "object", "props": [{"type": "integer64", "name": "count"}, {"type": "integer64", "name": "sizeGB"}, {"type": "object", "name": "sku", "props": [{"type": "string", "name": "name", "enum": {"items": [{"value": "PremiumV2_LRS"}, {"value": "Premium_LRS"}, {"value": "Premium_ZRS"}, {"value": "StandardSSD_LRS"}, {"value": "StandardSSD_ZRS"}, {"value": "Standard_LRS"}, {"value": "UltraSSD_LRS"}]}}]}]}}}], "cls": "DiskConfiguration_read"}, {"type": "object", "name": "networkConfiguration", "props": [{"default": {"value": false}, "type": "boolean", "name": "isSecondaryIpEnabled"}], "cls": "NetworkConfiguration_read"}, {"type": "string", "name": "subnetId", "required": true}, {"type": "object", "name": "virtualMachineConfiguration", "required": true, "props": [{"type": "object", "name": "imageReference", "required": true, "props": [{"type": "ResourceId", "name": "id"}, {"type": "string", "name": "offer"}, {"type": "string", "name": "publisher"}, {"type": "string", "name": "sku"}, {"type": "string", "name": "version"}]}, {"type": "object", "name": "osProfile", "required": true, "props": [{"type": "password", "name": "adminPassword", "secret": true}, {"type": "string", "name": "adminUsername"}, {"type": "object", "name": "osConfiguration", "props": [{"type": "string", "name": "osType", "required": true, "enum": {"items": [{"value": "Linux"}, {"value": "Windows"}]}}], "discriminators": [{"property": "osType", "value": "Linux", "props": [{"type": "boolean", "name": "disablePasswordAuthentication"}, {"type": "object", "name": "ssh", "props": [{"type": "array<object>", "name": "publicKeys", "item": {"type": "object", "props": [{"type": "string", "name": "keyData"}]}}]}, {"type": "object", "name": "sshKeyPair", "props": [{"type": "password", "name": "privateKey", "secret": true}, {"type": "string", "name": "publicKey"}]}]}, {"property": "osType", "value": "Windows"}]}]}, {"type": "string", "name": "vmSize", "required": true}], "cls": "VirtualMachineConfiguration_read"}]}, {"property": "deploymentType", "value": "ThreeTier", "props": [{"type": "object", "name": "applicationServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "centralServer", "required": true, "props": [{"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "customResourceNames", "props": [{"type": "string", "name": "namingPatternType", "required": true, "enum": {"items": [{"value": "FullResourceName"}]}}], "discriminators": [{"property": "namingPatternType", "value": "FullResourceName", "props": [{"type": "object", "name": "applicationServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "centralServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "object", "name": "loadBalancer", "props": [{"type": "array<string>", "name": "backendPoolNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "frontendIpConfigurationNames", "item": {"type": "string"}}, {"type": "array<string>", "name": "healthProbeNames", "item": {"type": "string"}}, {"type": "string", "name": "loadBalancerName"}], "cls": "LoadBalancerResourceNames_read"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "databaseServer", "props": [{"type": "string", "name": "availabilitySetName"}, {"type": "@LoadBalancerResourceNames_read", "name": "loadBalancer"}, {"type": "array<@VirtualMachineResourceNames_read>", "name": "virtualMachines", "item": {"type": "@VirtualMachineResourceNames_read"}}]}, {"type": "object", "name": "sharedStorage", "props": [{"type": "string", "name": "sharedStorageAccountName"}, {"type": "string", "name": "sharedStorageAccountPrivateEndPointName"}]}]}]}, {"type": "object", "name": "databaseServer", "required": true, "props": [{"type": "string", "name": "databaseType", "enum": {"items": [{"value": "DB2"}, {"value": "HANA"}]}}, {"type": "@DiskConfiguration_read", "name": "diskConfiguration"}, {"type": "integer64", "name": "instanceCount", "required": true}, {"type": "string", "name": "subnetId", "required": true}, {"type": "@VirtualMachineConfiguration_read", "name": "virtualMachineConfiguration", "required": true}]}, {"type": "object", "name": "highAvailabilityConfig", "props": [{"type": "string", "name": "highAvailabilityType", "required": true, "enum": {"items": [{"value": "AvailabilitySet"}, {"value": "AvailabilityZone"}]}}]}, {"type": "@NetworkConfiguration_read", "name": "networkConfiguration"}, {"type": "object", "name": "storageConfiguration", "props": [{"type": "object", "name": "transportFileShareConfiguration", "props": [{"type": "string", "name": "configurationType", "required": true, "enum": {"items": [{"value": "CreateAndMount"}, {"value": "Mount"}, {"value": "Skip"}]}}], "discriminators": [{"property": "configurationType", "value": "CreateAndMount", "props": [{"type": "string", "name": "resourceGroup"}, {"type": "string", "name": "storageAccountName"}]}, {"property": "configurationType", "value": "Mount", "props": [{"type": "string", "name": "id", "required": true}, {"type": "string", "name": "privateEndpointId", "required": true}]}, {"property": "configurationType", "value": "Skip"}]}]}]}], "cls": "InfrastructureConfiguration_read"}, {"type": "object", "name": "softwareConfiguration", "props": [{"type": "string", "name": "softwareInstallationType", "required": true, "enum": {"items": [{"value": "External"}, {"value": "SAPInstallWithoutOSConfig"}, {"value": "ServiceInitiated"}]}}], "discriminators": [{"property": "softwareInstallationType", "value": "External", "props": [{"type": "string", "name": "centralServerVmId"}]}, {"property": "softwareInstallationType", "value": "SAPInstallWithoutOSConfig", "props": [{"type": "string", "name": "bomUrl", "required": true}, {"type": "object", "name": "highAvailabilitySoftwareConfiguration", "props": [{"type": "string", "name": "fencingClientId", "required": true}, {"type": "password", "name": "fencingClientPassword", "required": true, "secret": true}], "cls": "HighAvailabilitySoftwareConfiguration_read"}, {"type": "string", "name": "sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "softwareVersion", "required": true}]}, {"property": "softwareInstallationType", "value": "ServiceInitiated", "props": [{"type": "string", "name": "bomUrl", "required": true}, {"type": "@HighAvailabilitySoftwareConfiguration_read", "name": "highAvailabilitySoftwareConfiguration"}, {"type": "string", "name": "sapBitsStorageAccountId", "required": true}, {"type": "string", "name": "sapFqdn", "required": true}, {"type": "string", "name": "softwareVersion", "required": true}, {"type": "password", "name": "sshPrivateKey", "required": true, "secret": true}]}], "cls": "SoftwareConfiguration_read"}]}, {"property": "configurationType", "value": "DeploymentWithOSConfig", "props": [{"type": "string", "name": "appLocation"}, {"type": "@InfrastructureConfiguration_read", "name": "infrastructureConfiguration"}, {"type": "object", "name": "osSapConfiguration", "props": [{"type": "object", "name": "deployerVmPackages", "props": [{"type": "string", "name": "storageAccountId"}, {"type": "string", "name": "url"}]}, {"type": "string", "name": "sapFqdn"}]}, {"type": "@SoftwareConfiguration_read", "name": "softwareConfiguration"}]}, {"property": "configurationType", "value": "Discovery", "props": [{"readOnly": true, "type": "string", "name": "appLocation"}, {"type": "string", "name": "centralServerVmId"}, {"type": "string", "name": "managedRgStorageAccountName", "format": {"maxLength": 24, "minLength": 3}}]}]}, {"type": "string", "name": "environment", "required": true, "enum": {"items": [{"value": "NonProd"}, {"value": "Prod"}]}}, {"readOnly": true, "type": "object", "name": "errors", "props": [{"type": "object", "name": "properties", "props": [{"readOnly": true, "type": "string", "name": "code"}, {"readOnly": true, "type": "array<@ErrorDefinition_read>", "name": "details", "item": {"type": "@ErrorDefinition_read"}}, {"readOnly": true, "type": "string", "name": "message"}], "cls": "ErrorDefinition_read"}]}, {"readOnly": true, "type": "string", "name": "health", "enum": {"items": [{"value": "Degraded"}, {"value": "Healthy"}, {"value": "Unhealthy"}, {"value": "Unknown"}]}}, {"type": "object", "name": "managedResourceGroupConfiguration", "props": [{"type": "string", "name": "name"}]}, {"type": "string", "name": "managedResourcesNetworkAccessType", "enum": {"items": [{"value": "Private"}, {"value": "Public"}]}}, {"readOnly": true, "type": "string", "name": "provisioningState", "enum": {"items": [{"value": "Canceled"}, {"value": "Creating"}, {"value": "Deleting"}, {"value": "Failed"}, {"value": "Succeeded"}, {"value": "Updating"}]}}, {"type": "string", "name": "sapProduct", "required": true, "enum": {"items": [{"value": "ECC"}, {"value": "Other"}, {"value": "S4HANA"}]}}, {"readOnly": true, "type": "string", "name": "state", "enum": {"items": [{"value": "ACSSInstallationBlocked"}, {"value": "DiscoveryFailed"}, {"value": "DiscoveryInProgress"}, {"value": "DiscoveryPending"}, {"value": "InfrastructureDeploymentFailed"}, {"value": "InfrastructureDeploymentInProgress"}, {"value": "InfrastructureDeploymentPending"}, {"value": "RegistrationComplete"}, {"value": "SoftwareDetectionFailed"}, {"value": "SoftwareDetectionInProgress"}, {"value": "SoftwareInstallationFailed"}, {"value": "SoftwareInstallationInProgress"}, {"value": "SoftwareInstallationPending"}]}}, {"readOnly": true, "type": "string", "name": "status", "enum": {"items": [{"value": "Offline"}, {"value": "PartiallyRunning"}, {"value": "Running"}, {"value": "SoftShutdown"}, {"value": "Starting"}, {"value": "Stopping"}, {"value": "Unavailable"}]}}], "clientFlatten": true}, {"readOnly": true, "type": "object", "name": "systemData", "props": [{"type": "dateTime", "name": "createdAt"}, {"type": "string", "name": "createdBy"}, {"type": "string", "name": "createdByType", "enum": {"items": [{"value": "Application"}, {"value": "Key"}, {"value": "ManagedIdentity"}, {"value": "User"}]}}, {"type": "dateTime", "name": "lastModifiedAt"}, {"type": "string", "name": "lastModifiedBy"}, {"type": "string", "name": "lastModifiedByType", "enum": {"items": [{"value": "Application"}, {"value": "Key"}, {"value": "ManagedIdentity"}, {"value": "User"}]}}]}, {"type": "object", "name": "tags", "additionalProps": {"item": {"type": "string"}}}, {"readOnly": true, "type": "string", "name": "type"}]}}}}, {"statusCode": [202], "header": {"items": [{"name": "Location"}, {"name": "Retry-After"}]}}, {"isError": true, "body": {"json": {"schema": {"type": "@MgmtErrorFormat"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}], "confirmation": ""}]}]}