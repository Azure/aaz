{"plane": "mgmt-plane", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/packetcaptures/{}", "version": "2024-05-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vcGFja2V0Q2FwdHVyZXMve3BhY2tldENhcHR1cmVOYW1lfQ==/V/MjAyNC0wNS0wMQ=="}], "commandGroups": [{"name": "network network-watcher packet-capture", "commands": [{"name": "show", "version": "2024-05-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/packetcaptures/{}", "version": "2024-05-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vcGFja2V0Q2FwdHVyZXMve3BhY2tldENhcHR1cmVOYW1lfQ==/V/MjAyNC0wNS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "string", "var": "$Path.networkWatcherName", "options": ["network-watcher-name"], "required": true, "idPart": "name", "help": {"short": "The name of the network watcher."}}, {"type": "string", "var": "$Path.packetCaptureName", "options": ["n", "name", "packet-capture-name"], "required": true, "idPart": "child_name_1", "help": {"short": "The name of the packet capture session."}}, {"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}], "operations": [{"operationId": "PacketCaptures_Get", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkWatchers/{networkWatcherName}/packetCaptures/{packetCaptureName}", "request": {"method": "get", "path": {"params": [{"type": "string", "name": "networkWatcherName", "arg": "$Path.networkWatcherName", "required": true}, {"type": "string", "name": "packetCaptureName", "arg": "$Path.packetCaptureName", "required": true}, {"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true}, {"type": "string", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-05-01"}, "type": "string", "name": "api-version", "required": true}]}}, "responses": [{"statusCode": [200], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "string", "name": "etag"}, {"readOnly": true, "type": "string", "name": "id"}, {"readOnly": true, "type": "string", "name": "name"}, {"type": "object", "name": "properties", "props": [{"default": {"value": 0}, "type": "integer64", "name": "bytesToCapturePerPacket", "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "object", "name": "captureSettings", "props": [{"default": {"value": 10}, "type": "integer32", "name": "fileCount", "format": {"maximum": 10000, "minimum": 0}}, {"default": {"value": 104857600}, "type": "integer64", "name": "fileSizeInBytes", "format": {"maximum": 4294967295, "minimum": 0}}, {"default": {"value": 86400}, "type": "integer32", "name": "sessionTimeLimitInSeconds", "format": {"maximum": 604800, "minimum": 0}}]}, {"type": "boolean", "name": "continuousCapture"}, {"type": "array<object>", "name": "filters", "item": {"type": "object", "props": [{"type": "string", "name": "localIPAddress"}, {"type": "string", "name": "localPort"}, {"default": {"value": "Any"}, "type": "string", "name": "protocol", "enum": {"items": [{"value": "Any"}, {"value": "TCP"}, {"value": "UDP"}]}}, {"type": "string", "name": "remoteIPAddress"}, {"type": "string", "name": "remotePort"}]}}, {"readOnly": true, "type": "string", "name": "provisioningState", "enum": {"items": [{"value": "Deleting"}, {"value": "Failed"}, {"value": "Succeeded"}, {"value": "Updating"}]}}, {"type": "object", "name": "scope", "props": [{"type": "array<string>", "name": "exclude", "item": {"type": "string"}}, {"type": "array<string>", "name": "include", "item": {"type": "string"}}]}, {"type": "object", "name": "storageLocation", "required": true, "props": [{"type": "string", "name": "filePath"}, {"type": "string", "name": "localPath"}, {"type": "string", "name": "storageId"}, {"type": "string", "name": "storagePath"}]}, {"type": "string", "name": "target", "required": true}, {"type": "string", "name": "targetType", "enum": {"items": [{"value": "AzureVM"}, {"value": "AzureVMSS"}]}}, {"default": {"value": 18000}, "type": "integer32", "name": "timeLimitInSeconds", "format": {"maximum": 18000, "minimum": 0}}, {"default": {"value": 1073741824}, "type": "integer64", "name": "totalBytesPerSession", "format": {"maximum": 4294967295, "minimum": 0}}], "clientFlatten": true}]}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@ODataV4Format"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}]}, {"name": "delete", "version": "2024-05-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/packetcaptures/{}", "version": "2024-05-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vcGFja2V0Q2FwdHVyZXMve3BhY2tldENhcHR1cmVOYW1lfQ==/V/MjAyNC0wNS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "string", "var": "$Path.networkWatcherName", "options": ["network-watcher-name"], "required": true, "idPart": "name", "help": {"short": "The name of the network watcher."}}, {"type": "string", "var": "$Path.packetCaptureName", "options": ["n", "name", "packet-capture-name"], "required": true, "idPart": "child_name_1", "help": {"short": "The name of the packet capture session."}}, {"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}], "operations": [{"longRunning": {"finalStateVia": "location"}, "operationId": "PacketCaptures_Delete", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkWatchers/{networkWatcherName}/packetCaptures/{packetCaptureName}", "request": {"method": "delete", "path": {"params": [{"type": "string", "name": "networkWatcherName", "arg": "$Path.networkWatcherName", "required": true}, {"type": "string", "name": "packetCaptureName", "arg": "$Path.packetCaptureName", "required": true}, {"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true}, {"type": "string", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-05-01"}, "type": "string", "name": "api-version", "required": true}]}}, "responses": [{"statusCode": [202]}, {"statusCode": [204]}, {"statusCode": [200, 201]}, {"isError": true, "body": {"json": {"schema": {"type": "@ODataV4Format"}}}}]}}], "confirmation": "Are you sure you want to perform this operation?"}, {"name": "create", "version": "2024-05-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/packetcaptures/{}", "version": "2024-05-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vcGFja2V0Q2FwdHVyZXMve3BhY2tldENhcHR1cmVOYW1lfQ==/V/MjAyNC0wNS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "string", "var": "$Path.networkWatcherName", "options": ["network-watcher-name"], "required": true, "idPart": "name", "help": {"short": "The name of the network watcher."}}, {"type": "string", "var": "$Path.packetCaptureName", "options": ["n", "name", "packet-capture-name"], "required": true, "idPart": "child_name_1", "help": {"short": "The name of the packet capture session."}}, {"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}, {"name": "Properties", "args": [{"type": "integer64", "var": "$parameters.properties.bytesToCapturePerPacket", "options": ["bytes-to-capture-per-packet"], "group": "Properties", "help": {"short": "Number of bytes captured per packet, the remaining bytes are truncated."}, "default": {"value": 0}, "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "object", "var": "$parameters.properties.captureSettings", "options": ["capture-settings"], "group": "Properties", "help": {"short": "The capture setting holds the 'FileCount', 'FileSizeInBytes', 'SessionTimeLimitInSeconds' values."}, "args": [{"type": "integer32", "var": "$parameters.properties.captureSettings.fileCount", "options": ["file-count"], "help": {"short": "Number of file count. Default value of count is 10 and maximum number is 10000."}, "default": {"value": 10}, "format": {"maximum": 10000, "minimum": 0}}, {"type": "integer64", "var": "$parameters.properties.captureSettings.fileSizeInBytes", "options": ["file-size-in-bytes"], "help": {"short": "Number of bytes captured per packet. Default value in bytes 104857600 (100MB) and maximum in bytes 4294967295 (4GB)."}, "default": {"value": 104857600}, "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "integer32", "var": "$parameters.properties.captureSettings.sessionTimeLimitInSeconds", "options": ["session-time-limit-in-seconds"], "help": {"short": "Maximum duration of the capture session in seconds is 604800s (7 days) for a file. Default value in second 86400s (1 day)."}, "default": {"value": 86400}, "format": {"maximum": 604800, "minimum": 0}}]}, {"type": "boolean", "var": "$parameters.properties.continuousCapture", "options": ["continuous-capture"], "group": "Properties", "help": {"short": "This continuous capture is a nullable boolean, which can hold 'null', 'true' or 'false' value. If we do not pass this parameter, it would be consider as 'null', default value is 'null'."}}, {"type": "array<object>", "var": "$parameters.properties.filters", "options": ["filters"], "group": "Properties", "help": {"short": "A list of packet capture filters."}, "item": {"type": "object", "args": [{"type": "string", "var": "$parameters.properties.filters[].localIPAddress", "options": ["local-ip-address"], "help": {"short": "Local IP Address to be filtered on. Notation: \"127.0.0.1\" for single address entry. \"127.0.0.1-127.0.0.255\" for range. \"127.0.0.1;127.0.0.5\"? for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}, {"type": "string", "var": "$parameters.properties.filters[].localPort", "options": ["local-port"], "help": {"short": "Local port to be filtered on. Notation: \"80\" for single port entry.\"80-85\" for range. \"80;443;\" for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}, {"type": "string", "var": "$parameters.properties.filters[].protocol", "options": ["protocol"], "help": {"short": "Protocol to be filtered on."}, "default": {"value": "Any"}, "enum": {"items": [{"name": "Any", "value": "Any"}, {"name": "TCP", "value": "TCP"}, {"name": "UDP", "value": "UDP"}]}}, {"type": "string", "var": "$parameters.properties.filters[].remoteIPAddress", "options": ["remote-ip-address"], "help": {"short": "Local IP Address to be filtered on. Notation: \"127.0.0.1\" for single address entry. \"127.0.0.1-127.0.0.255\" for range. \"127.0.0.1;127.0.0.5;\" for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}, {"type": "string", "var": "$parameters.properties.filters[].remotePort", "options": ["remote-port"], "help": {"short": "Remote port to be filtered on. Notation: \"80\" for single port entry.\"80-85\" for range. \"80;443;\" for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}]}}, {"type": "object", "var": "$parameters.properties.scope", "options": ["scope"], "group": "Properties", "help": {"short": "A list of AzureVMSS instances which can be included or excluded to run packet capture. If both included and excluded are empty, then the packet capture will run on all instances of AzureVMSS."}, "args": [{"type": "array<string>", "var": "$parameters.properties.scope.exclude", "options": ["exclude"], "help": {"short": "List of AzureVMSS instances which has to be excluded from the AzureVMSS from running packet capture."}, "item": {"type": "string"}}, {"type": "array<string>", "var": "$parameters.properties.scope.include", "options": ["include"], "help": {"short": "List of AzureVMSS instances to run packet capture on."}, "item": {"type": "string"}}]}, {"type": "object", "var": "$parameters.properties.storageLocation", "options": ["storage-location"], "required": true, "group": "Properties", "help": {"short": "The storage location for a packet capture session."}, "args": [{"type": "string", "var": "$parameters.properties.storageLocation.filePath", "options": ["file-path"], "help": {"short": "This path is invalid if 'Continuous Capture' is provided with 'true' or 'false'. A valid local path on the targeting VM. Must include the name of the capture file (*.cap). For linux virtual machine it must start with /var/captures. Required if no storage ID is provided, otherwise optional."}}, {"type": "string", "var": "$parameters.properties.storageLocation.localPath", "options": ["local-path"], "help": {"short": "This path is valid if 'Continuous Capture' is provided with 'true' or 'false' and required if no storage ID is provided, otherwise optional. Must include the name of the capture file (*.cap). For linux virtual machine it must start with /var/captures."}}, {"type": "string", "var": "$parameters.properties.storageLocation.storageId", "options": ["storage-id"], "help": {"short": "The ID of the storage account to save the packet capture session. Required if no localPath or filePath is provided."}}, {"type": "string", "var": "$parameters.properties.storageLocation.storagePath", "options": ["storage-path"], "help": {"short": "The URI of the storage path to save the packet capture. Must be a well-formed URI describing the location to save the packet capture."}}]}, {"type": "string", "var": "$parameters.properties.target", "options": ["target"], "required": true, "group": "Properties", "help": {"short": "The ID of the targeted resource, only AzureVM and AzureVMSS as target type are currently supported."}}, {"type": "string", "var": "$parameters.properties.targetType", "options": ["target-type"], "group": "Properties", "help": {"short": "Target type of the resource provided."}, "enum": {"items": [{"name": "AzureVM", "value": "AzureVM"}, {"name": "AzureVMSS", "value": "AzureVMSS"}]}}, {"type": "integer32", "var": "$parameters.properties.timeLimitInSeconds", "options": ["time-limit-in-seconds"], "group": "Properties", "help": {"short": "Maximum duration of the capture session in seconds."}, "default": {"value": 18000}, "format": {"maximum": 18000, "minimum": 0}}, {"type": "integer64", "var": "$parameters.properties.totalBytesPerSession", "options": ["total-bytes-per-session"], "group": "Properties", "help": {"short": "Maximum size of the capture output."}, "default": {"value": 1073741824}, "format": {"maximum": 4294967295, "minimum": 0}}]}], "operations": [{"longRunning": {"finalStateVia": "azure-async-operation"}, "operationId": "PacketCaptures_Create", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkWatchers/{networkWatcherName}/packetCaptures/{packetCaptureName}", "request": {"method": "put", "path": {"params": [{"type": "string", "name": "networkWatcherName", "arg": "$Path.networkWatcherName", "required": true}, {"type": "string", "name": "packetCaptureName", "arg": "$Path.packetCaptureName", "required": true}, {"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true}, {"type": "string", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-05-01"}, "type": "string", "name": "api-version", "required": true}]}, "body": {"json": {"schema": {"type": "object", "name": "parameters", "required": true, "props": [{"type": "object", "name": "properties", "required": true, "props": [{"default": {"value": 0}, "type": "integer64", "name": "bytesToCapturePerPacket", "arg": "$parameters.properties.bytesToCapturePerPacket", "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "object", "name": "captureSettings", "arg": "$parameters.properties.captureSettings", "props": [{"default": {"value": 10}, "type": "integer32", "name": "fileCount", "arg": "$parameters.properties.captureSettings.fileCount", "format": {"maximum": 10000, "minimum": 0}}, {"default": {"value": 104857600}, "type": "integer64", "name": "fileSizeInBytes", "arg": "$parameters.properties.captureSettings.fileSizeInBytes", "format": {"maximum": 4294967295, "minimum": 0}}, {"default": {"value": 86400}, "type": "integer32", "name": "sessionTimeLimitInSeconds", "arg": "$parameters.properties.captureSettings.sessionTimeLimitInSeconds", "format": {"maximum": 604800, "minimum": 0}}]}, {"type": "boolean", "name": "continuousCapture", "arg": "$parameters.properties.continuousCapture"}, {"type": "array<object>", "name": "filters", "arg": "$parameters.properties.filters", "item": {"type": "object", "props": [{"type": "string", "name": "localIPAddress", "arg": "$parameters.properties.filters[].localIPAddress"}, {"type": "string", "name": "localPort", "arg": "$parameters.properties.filters[].localPort"}, {"default": {"value": "Any"}, "type": "string", "name": "protocol", "arg": "$parameters.properties.filters[].protocol", "enum": {"items": [{"value": "Any"}, {"value": "TCP"}, {"value": "UDP"}]}}, {"type": "string", "name": "remoteIPAddress", "arg": "$parameters.properties.filters[].remoteIPAddress"}, {"type": "string", "name": "remotePort", "arg": "$parameters.properties.filters[].remotePort"}]}}, {"type": "object", "name": "scope", "arg": "$parameters.properties.scope", "props": [{"type": "array<string>", "name": "exclude", "arg": "$parameters.properties.scope.exclude", "item": {"type": "string"}}, {"type": "array<string>", "name": "include", "arg": "$parameters.properties.scope.include", "item": {"type": "string"}}]}, {"type": "object", "name": "storageLocation", "arg": "$parameters.properties.storageLocation", "required": true, "props": [{"type": "string", "name": "filePath", "arg": "$parameters.properties.storageLocation.filePath"}, {"type": "string", "name": "localPath", "arg": "$parameters.properties.storageLocation.localPath"}, {"type": "string", "name": "storageId", "arg": "$parameters.properties.storageLocation.storageId"}, {"type": "string", "name": "storagePath", "arg": "$parameters.properties.storageLocation.storagePath"}]}, {"type": "string", "name": "target", "arg": "$parameters.properties.target", "required": true}, {"type": "string", "name": "targetType", "arg": "$parameters.properties.targetType", "enum": {"items": [{"value": "AzureVM"}, {"value": "AzureVMSS"}]}}, {"default": {"value": 18000}, "type": "integer32", "name": "timeLimitInSeconds", "arg": "$parameters.properties.timeLimitInSeconds", "format": {"maximum": 18000, "minimum": 0}}, {"default": {"value": 1073741824}, "type": "integer64", "name": "totalBytesPerSession", "arg": "$parameters.properties.totalBytesPerSession", "format": {"maximum": 4294967295, "minimum": 0}}], "clientFlatten": true}], "clientFlatten": true}}}}, "responses": [{"statusCode": [201], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "string", "name": "etag"}, {"readOnly": true, "type": "string", "name": "id"}, {"readOnly": true, "type": "string", "name": "name"}, {"type": "object", "name": "properties", "props": [{"default": {"value": 0}, "type": "integer64", "name": "bytesToCapturePerPacket", "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "object", "name": "captureSettings", "props": [{"default": {"value": 10}, "type": "integer32", "name": "fileCount", "format": {"maximum": 10000, "minimum": 0}}, {"default": {"value": 104857600}, "type": "integer64", "name": "fileSizeInBytes", "format": {"maximum": 4294967295, "minimum": 0}}, {"default": {"value": 86400}, "type": "integer32", "name": "sessionTimeLimitInSeconds", "format": {"maximum": 604800, "minimum": 0}}]}, {"type": "boolean", "name": "continuousCapture"}, {"type": "array<object>", "name": "filters", "item": {"type": "object", "props": [{"type": "string", "name": "localIPAddress"}, {"type": "string", "name": "localPort"}, {"default": {"value": "Any"}, "type": "string", "name": "protocol", "enum": {"items": [{"value": "Any"}, {"value": "TCP"}, {"value": "UDP"}]}}, {"type": "string", "name": "remoteIPAddress"}, {"type": "string", "name": "remotePort"}]}}, {"readOnly": true, "type": "string", "name": "provisioningState", "enum": {"items": [{"value": "Deleting"}, {"value": "Failed"}, {"value": "Succeeded"}, {"value": "Updating"}]}}, {"type": "object", "name": "scope", "props": [{"type": "array<string>", "name": "exclude", "item": {"type": "string"}}, {"type": "array<string>", "name": "include", "item": {"type": "string"}}]}, {"type": "object", "name": "storageLocation", "required": true, "props": [{"type": "string", "name": "filePath"}, {"type": "string", "name": "localPath"}, {"type": "string", "name": "storageId"}, {"type": "string", "name": "storagePath"}]}, {"type": "string", "name": "target", "required": true}, {"type": "string", "name": "targetType", "enum": {"items": [{"value": "AzureVM"}, {"value": "AzureVMSS"}]}}, {"default": {"value": 18000}, "type": "integer32", "name": "timeLimitInSeconds", "format": {"maximum": 18000, "minimum": 0}}, {"default": {"value": 1073741824}, "type": "integer64", "name": "totalBytesPerSession", "format": {"maximum": 4294967295, "minimum": 0}}], "clientFlatten": true}]}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@ODataV4Format"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}]}, {"name": "update", "version": "2024-05-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/packetcaptures/{}", "version": "2024-05-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vcGFja2V0Q2FwdHVyZXMve3BhY2tldENhcHR1cmVOYW1lfQ==/V/MjAyNC0wNS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "string", "var": "$Path.networkWatcherName", "options": ["network-watcher-name"], "required": true, "idPart": "name", "help": {"short": "The name of the network watcher."}}, {"type": "string", "var": "$Path.packetCaptureName", "options": ["n", "name", "packet-capture-name"], "required": true, "idPart": "child_name_1", "help": {"short": "The name of the packet capture session."}}, {"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["g", "resource-group"], "required": true, "idPart": "resource_group"}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}]}, {"name": "Properties", "args": [{"nullable": true, "type": "integer64", "var": "$parameters.properties.bytesToCapturePerPacket", "options": ["bytes-to-capture-per-packet"], "group": "Properties", "help": {"short": "Number of bytes captured per packet, the remaining bytes are truncated."}, "format": {"maximum": 4294967295, "minimum": 0}}, {"nullable": true, "type": "object", "var": "$parameters.properties.captureSettings", "options": ["capture-settings"], "group": "Properties", "help": {"short": "The capture setting holds the 'FileCount', 'FileSizeInBytes', 'SessionTimeLimitInSeconds' values."}, "args": [{"nullable": true, "type": "integer32", "var": "$parameters.properties.captureSettings.fileCount", "options": ["file-count"], "help": {"short": "Number of file count. Default value of count is 10 and maximum number is 10000."}, "format": {"maximum": 10000, "minimum": 0}}, {"nullable": true, "type": "integer64", "var": "$parameters.properties.captureSettings.fileSizeInBytes", "options": ["file-size-in-bytes"], "help": {"short": "Number of bytes captured per packet. Default value in bytes 104857600 (100MB) and maximum in bytes 4294967295 (4GB)."}, "format": {"maximum": 4294967295, "minimum": 0}}, {"nullable": true, "type": "integer32", "var": "$parameters.properties.captureSettings.sessionTimeLimitInSeconds", "options": ["session-time-limit-in-seconds"], "help": {"short": "Maximum duration of the capture session in seconds is 604800s (7 days) for a file. Default value in second 86400s (1 day)."}, "format": {"maximum": 604800, "minimum": 0}}]}, {"nullable": true, "type": "boolean", "var": "$parameters.properties.continuousCapture", "options": ["continuous-capture"], "group": "Properties", "help": {"short": "This continuous capture is a nullable boolean, which can hold 'null', 'true' or 'false' value. If we do not pass this parameter, it would be consider as 'null', default value is 'null'."}}, {"nullable": true, "type": "array<object>", "var": "$parameters.properties.filters", "options": ["filters"], "group": "Properties", "help": {"short": "A list of packet capture filters."}, "item": {"nullable": true, "type": "object", "args": [{"nullable": true, "type": "string", "var": "$parameters.properties.filters[].localIPAddress", "options": ["local-ip-address"], "help": {"short": "Local IP Address to be filtered on. Notation: \"127.0.0.1\" for single address entry. \"127.0.0.1-127.0.0.255\" for range. \"127.0.0.1;127.0.0.5\"? for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.filters[].localPort", "options": ["local-port"], "help": {"short": "Local port to be filtered on. Notation: \"80\" for single port entry.\"80-85\" for range. \"80;443;\" for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.filters[].protocol", "options": ["protocol"], "help": {"short": "Protocol to be filtered on."}, "enum": {"items": [{"name": "Any", "value": "Any"}, {"name": "TCP", "value": "TCP"}, {"name": "UDP", "value": "UDP"}]}}, {"nullable": true, "type": "string", "var": "$parameters.properties.filters[].remoteIPAddress", "options": ["remote-ip-address"], "help": {"short": "Local IP Address to be filtered on. Notation: \"127.0.0.1\" for single address entry. \"127.0.0.1-127.0.0.255\" for range. \"127.0.0.1;127.0.0.5;\" for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.filters[].remotePort", "options": ["remote-port"], "help": {"short": "Remote port to be filtered on. Notation: \"80\" for single port entry.\"80-85\" for range. \"80;443;\" for multiple entries. Multiple ranges not currently supported. Mixing ranges with multiple entries not currently supported. Default = null."}}]}}, {"nullable": true, "type": "object", "var": "$parameters.properties.scope", "options": ["scope"], "group": "Properties", "help": {"short": "A list of AzureVMSS instances which can be included or excluded to run packet capture. If both included and excluded are empty, then the packet capture will run on all instances of AzureVMSS."}, "args": [{"nullable": true, "type": "array<string>", "var": "$parameters.properties.scope.exclude", "options": ["exclude"], "help": {"short": "List of AzureVMSS instances which has to be excluded from the AzureVMSS from running packet capture."}, "item": {"nullable": true, "type": "string"}}, {"nullable": true, "type": "array<string>", "var": "$parameters.properties.scope.include", "options": ["include"], "help": {"short": "List of AzureVMSS instances to run packet capture on."}, "item": {"nullable": true, "type": "string"}}]}, {"type": "object", "var": "$parameters.properties.storageLocation", "options": ["storage-location"], "group": "Properties", "help": {"short": "The storage location for a packet capture session."}, "args": [{"nullable": true, "type": "string", "var": "$parameters.properties.storageLocation.filePath", "options": ["file-path"], "help": {"short": "This path is invalid if 'Continuous Capture' is provided with 'true' or 'false'. A valid local path on the targeting VM. Must include the name of the capture file (*.cap). For linux virtual machine it must start with /var/captures. Required if no storage ID is provided, otherwise optional."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.storageLocation.localPath", "options": ["local-path"], "help": {"short": "This path is valid if 'Continuous Capture' is provided with 'true' or 'false' and required if no storage ID is provided, otherwise optional. Must include the name of the capture file (*.cap). For linux virtual machine it must start with /var/captures."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.storageLocation.storageId", "options": ["storage-id"], "help": {"short": "The ID of the storage account to save the packet capture session. Required if no localPath or filePath is provided."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.storageLocation.storagePath", "options": ["storage-path"], "help": {"short": "The URI of the storage path to save the packet capture. Must be a well-formed URI describing the location to save the packet capture."}}]}, {"type": "string", "var": "$parameters.properties.target", "options": ["target"], "group": "Properties", "help": {"short": "The ID of the targeted resource, only AzureVM and AzureVMSS as target type are currently supported."}}, {"nullable": true, "type": "string", "var": "$parameters.properties.targetType", "options": ["target-type"], "group": "Properties", "help": {"short": "Target type of the resource provided."}, "enum": {"items": [{"name": "AzureVM", "value": "AzureVM"}, {"name": "AzureVMSS", "value": "AzureVMSS"}]}}, {"nullable": true, "type": "integer32", "var": "$parameters.properties.timeLimitInSeconds", "options": ["time-limit-in-seconds"], "group": "Properties", "help": {"short": "Maximum duration of the capture session in seconds."}, "format": {"maximum": 18000, "minimum": 0}}, {"nullable": true, "type": "integer64", "var": "$parameters.properties.totalBytesPerSession", "options": ["total-bytes-per-session"], "group": "Properties", "help": {"short": "Maximum size of the capture output."}, "format": {"maximum": 4294967295, "minimum": 0}}]}], "operations": [{"operationId": "PacketCaptures_Get", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkWatchers/{networkWatcherName}/packetCaptures/{packetCaptureName}", "request": {"method": "get", "path": {"params": [{"type": "string", "name": "networkWatcherName", "arg": "$Path.networkWatcherName", "required": true}, {"type": "string", "name": "packetCaptureName", "arg": "$Path.packetCaptureName", "required": true}, {"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true}, {"type": "string", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-05-01"}, "type": "string", "name": "api-version", "required": true}]}}, "responses": [{"statusCode": [200], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "string", "name": "etag"}, {"readOnly": true, "type": "string", "name": "id"}, {"readOnly": true, "type": "string", "name": "name"}, {"type": "object", "name": "properties", "props": [{"default": {"value": 0}, "type": "integer64", "name": "bytesToCapturePerPacket", "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "object", "name": "captureSettings", "props": [{"default": {"value": 10}, "type": "integer32", "name": "fileCount", "format": {"maximum": 10000, "minimum": 0}}, {"default": {"value": 104857600}, "type": "integer64", "name": "fileSizeInBytes", "format": {"maximum": 4294967295, "minimum": 0}}, {"default": {"value": 86400}, "type": "integer32", "name": "sessionTimeLimitInSeconds", "format": {"maximum": 604800, "minimum": 0}}]}, {"type": "boolean", "name": "continuousCapture"}, {"type": "array<object>", "name": "filters", "item": {"type": "object", "props": [{"type": "string", "name": "localIPAddress"}, {"type": "string", "name": "localPort"}, {"default": {"value": "Any"}, "type": "string", "name": "protocol", "enum": {"items": [{"value": "Any"}, {"value": "TCP"}, {"value": "UDP"}]}}, {"type": "string", "name": "remoteIPAddress"}, {"type": "string", "name": "remotePort"}]}}, {"readOnly": true, "type": "string", "name": "provisioningState", "enum": {"items": [{"value": "Deleting"}, {"value": "Failed"}, {"value": "Succeeded"}, {"value": "Updating"}]}}, {"type": "object", "name": "scope", "props": [{"type": "array<string>", "name": "exclude", "item": {"type": "string"}}, {"type": "array<string>", "name": "include", "item": {"type": "string"}}]}, {"type": "object", "name": "storageLocation", "required": true, "props": [{"type": "string", "name": "filePath"}, {"type": "string", "name": "localPath"}, {"type": "string", "name": "storageId"}, {"type": "string", "name": "storagePath"}]}, {"type": "string", "name": "target", "required": true}, {"type": "string", "name": "targetType", "enum": {"items": [{"value": "AzureVM"}, {"value": "AzureVMSS"}]}}, {"default": {"value": 18000}, "type": "integer32", "name": "timeLimitInSeconds", "format": {"maximum": 18000, "minimum": 0}}, {"default": {"value": 1073741824}, "type": "integer64", "name": "totalBytesPerSession", "format": {"maximum": 4294967295, "minimum": 0}}], "clientFlatten": true}], "cls": "PacketCaptureResult_read"}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@ODataV4Format"}}}}]}}, {"instanceUpdate": {"ref": "$Instance", "json": {"schema": {"type": "object", "name": "parameters", "required": true, "props": [{"type": "object", "name": "properties", "required": true, "props": [{"default": {"value": 0}, "type": "integer64", "name": "bytesToCapturePerPacket", "arg": "$parameters.properties.bytesToCapturePerPacket", "format": {"maximum": 4294967295, "minimum": 0}}, {"type": "object", "name": "captureSettings", "arg": "$parameters.properties.captureSettings", "props": [{"default": {"value": 10}, "type": "integer32", "name": "fileCount", "arg": "$parameters.properties.captureSettings.fileCount", "format": {"maximum": 10000, "minimum": 0}}, {"default": {"value": 104857600}, "type": "integer64", "name": "fileSizeInBytes", "arg": "$parameters.properties.captureSettings.fileSizeInBytes", "format": {"maximum": 4294967295, "minimum": 0}}, {"default": {"value": 86400}, "type": "integer32", "name": "sessionTimeLimitInSeconds", "arg": "$parameters.properties.captureSettings.sessionTimeLimitInSeconds", "format": {"maximum": 604800, "minimum": 0}}]}, {"type": "boolean", "name": "continuousCapture", "arg": "$parameters.properties.continuousCapture"}, {"type": "array<object>", "name": "filters", "arg": "$parameters.properties.filters", "item": {"type": "object", "props": [{"type": "string", "name": "localIPAddress", "arg": "$parameters.properties.filters[].localIPAddress"}, {"type": "string", "name": "localPort", "arg": "$parameters.properties.filters[].localPort"}, {"default": {"value": "Any"}, "type": "string", "name": "protocol", "arg": "$parameters.properties.filters[].protocol", "enum": {"items": [{"value": "Any"}, {"value": "TCP"}, {"value": "UDP"}]}}, {"type": "string", "name": "remoteIPAddress", "arg": "$parameters.properties.filters[].remoteIPAddress"}, {"type": "string", "name": "remotePort", "arg": "$parameters.properties.filters[].remotePort"}]}}, {"type": "object", "name": "scope", "arg": "$parameters.properties.scope", "props": [{"type": "array<string>", "name": "exclude", "arg": "$parameters.properties.scope.exclude", "item": {"type": "string"}}, {"type": "array<string>", "name": "include", "arg": "$parameters.properties.scope.include", "item": {"type": "string"}}]}, {"type": "object", "name": "storageLocation", "arg": "$parameters.properties.storageLocation", "required": true, "props": [{"type": "string", "name": "filePath", "arg": "$parameters.properties.storageLocation.filePath"}, {"type": "string", "name": "localPath", "arg": "$parameters.properties.storageLocation.localPath"}, {"type": "string", "name": "storageId", "arg": "$parameters.properties.storageLocation.storageId"}, {"type": "string", "name": "storagePath", "arg": "$parameters.properties.storageLocation.storagePath"}]}, {"type": "string", "name": "target", "arg": "$parameters.properties.target", "required": true}, {"type": "string", "name": "targetType", "arg": "$parameters.properties.targetType", "enum": {"items": [{"value": "AzureVM"}, {"value": "AzureVMSS"}]}}, {"default": {"value": 18000}, "type": "integer32", "name": "timeLimitInSeconds", "arg": "$parameters.properties.timeLimitInSeconds", "format": {"maximum": 18000, "minimum": 0}}, {"default": {"value": 1073741824}, "type": "integer64", "name": "totalBytesPerSession", "arg": "$parameters.properties.totalBytesPerSession", "format": {"maximum": 4294967295, "minimum": 0}}], "clientFlatten": true}], "clientFlatten": true}}}}, {"longRunning": {"finalStateVia": "azure-async-operation"}, "operationId": "PacketCaptures_Create", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkWatchers/{networkWatcherName}/packetCaptures/{packetCaptureName}", "request": {"method": "put", "path": {"params": [{"type": "string", "name": "networkWatcherName", "arg": "$Path.networkWatcherName", "required": true}, {"type": "string", "name": "packetCaptureName", "arg": "$Path.packetCaptureName", "required": true}, {"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true}, {"type": "string", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2024-05-01"}, "type": "string", "name": "api-version", "required": true}]}, "body": {"json": {"ref": "$Instance"}}}, "responses": [{"statusCode": [201], "body": {"json": {"var": "$Instance", "schema": {"type": "@PacketCaptureResult_read"}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@ODataV4Format"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}]}]}]}