{"plane": "mgmt-plane", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/connectivitycheck", "version": "2022-01-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vY29ubmVjdGl2aXR5Q2hlY2s=/V/MjAyMi0wMS0wMQ=="}], "commandGroups": [{"name": "network watcher", "commands": [{"name": "test-connectivity", "version": "2022-01-01", "resources": [{"id": "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/connectivitycheck", "version": "2022-01-01", "swagger": "mgmt-plane/network/ResourceProviders/Microsoft.Network/Paths/L3N1YnNjcmlwdGlvbnMve3N1YnNjcmlwdGlvbklkfS9yZXNvdXJjZUdyb3Vwcy97cmVzb3VyY2VHcm91cE5hbWV9L3Byb3ZpZGVycy9NaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrV2F0Y2hlcnMve25ldHdvcmtXYXRjaGVyTmFtZX0vY29ubmVjdGl2aXR5Q2hlY2s=/V/MjAyMi0wMS0wMQ=="}], "argGroups": [{"name": "", "args": [{"type": "string", "var": "$Path.networkWatcherName", "options": ["watcher-name"], "required": true, "group": "", "idPart": "name", "help": {"short": "Name of the network watcher resource."}}, {"type": "ResourceGroupName", "var": "$Path.resourceGroupName", "options": ["watcher-rg"], "required": true, "group": "", "idPart": "resource_group", "help": {"short": "Name of the resource group the watcher is in."}}, {"type": "SubscriptionId", "var": "$Path.subscriptionId", "options": ["subscription"], "required": true, "idPart": "subscription"}, {"type": "string", "var": "$parameters.protocol", "options": ["protocol"], "group": "", "help": {"short": "Protocol to test on."}, "enum": {"items": [{"name": "Http", "value": "Http"}, {"name": "Https", "value": "Https"}, {"name": "Icmp", "value": "Icmp"}, {"name": "Tcp", "value": "Tcp"}]}}, {"type": "integer32", "var": "$parameters.source.port", "options": ["source-port"], "group": "", "help": {"short": "Port number from which to originate traffic."}, "format": {"maximum": 65535, "minimum": 0}}, {"type": "string", "var": "$parameters.source.resourceId", "options": ["source-resource"], "required": true, "group": "", "help": {"short": "Name or ID of the resource from which to originate traffic. Currently only Virtual Machines are supported."}}]}, {"name": "Destination", "args": [{"type": "string", "var": "$parameters.destination.address", "options": ["dest-address"], "group": "Destination", "help": {"short": "IP address or URI at which to receive traffic."}}, {"type": "integer32", "var": "$parameters.destination.port", "options": ["dest-port"], "group": "Destination", "help": {"short": "Port number on which to receive traffic."}, "format": {"maximum": 65535, "minimum": 0}}, {"type": "string", "var": "$parameters.destination.resourceId", "options": ["dest-resource"], "group": "Destination", "help": {"short": "Name or ID of the resource to receive traffic. Currently only Virtual Machines are supported."}}]}, {"name": "HTTP Configuration", "args": [{"type": "array<object>", "var": "$parameters.protocolConfiguration.HTTPConfiguration.headers", "options": ["headers-obj"], "group": "HTTP Configuration", "help": {"short": "List of HTTP headers."}, "item": {"type": "object", "args": [{"type": "string", "var": "$parameters.protocolConfiguration.HTTPConfiguration.headers[].name", "options": ["name"], "help": {"short": "The name in HTTP header."}}, {"type": "string", "var": "$parameters.protocolConfiguration.HTTPConfiguration.headers[].value", "options": ["value"], "help": {"short": "The value in HTTP header."}}]}}, {"type": "string", "var": "$parameters.protocolConfiguration.HTTPConfiguration.method", "options": ["method"], "group": "HTTP Configuration", "help": {"short": "HTTP method to use."}, "enum": {"items": [{"name": "Get", "value": "Get"}]}}, {"type": "array<integer32>", "var": "$parameters.protocolConfiguration.HTTPConfiguration.validStatusCodes", "options": ["valid-status-codes"], "group": "HTTP Configuration", "help": {"short": "Space-separated list of HTTP status codes considered valid."}, "item": {"type": "integer32"}}]}, {"name": "Parameters", "args": [{"type": "string", "var": "$parameters.preferredIPVersion", "options": ["preferred-ip-version"], "hide": true, "group": "Parameters", "help": {"short": "Preferred IP version of the connection."}, "enum": {"items": [{"name": "IPv4", "value": "IPv4"}, {"name": "IPv6", "value": "IPv6"}]}}]}], "operations": [{"longRunning": {"finalStateVia": "location"}, "operationId": "NetworkWatchers_CheckConnectivity", "http": {"path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkWatchers/{networkWatcherName}/connectivityCheck", "request": {"method": "post", "path": {"params": [{"type": "string", "name": "networkWatcherName", "arg": "$Path.networkWatcherName", "required": true}, {"type": "string", "name": "resourceGroupName", "arg": "$Path.resourceGroupName", "required": true}, {"type": "string", "name": "subscriptionId", "arg": "$Path.subscriptionId", "required": true}]}, "query": {"consts": [{"readOnly": true, "const": true, "default": {"value": "2022-01-01"}, "type": "string", "name": "api-version", "required": true}]}, "body": {"json": {"schema": {"type": "object", "name": "parameters", "required": true, "props": [{"type": "object", "name": "destination", "required": true, "props": [{"type": "string", "name": "address", "arg": "$parameters.destination.address"}, {"type": "integer32", "name": "port", "arg": "$parameters.destination.port", "format": {"maximum": 65535, "minimum": 0}}, {"type": "string", "name": "resourceId", "arg": "$parameters.destination.resourceId"}]}, {"type": "string", "name": "preferredIPVersion", "arg": "$parameters.preferredIPVersion", "enum": {"items": [{"value": "IPv4"}, {"value": "IPv6"}]}}, {"type": "string", "name": "protocol", "arg": "$parameters.protocol", "enum": {"items": [{"value": "Http"}, {"value": "Https"}, {"value": "Icmp"}, {"value": "Tcp"}]}}, {"type": "object", "name": "protocolConfiguration", "props": [{"type": "object", "name": "HTTPConfiguration", "props": [{"type": "array<object>", "name": "headers", "arg": "$parameters.protocolConfiguration.HTTPConfiguration.headers", "item": {"type": "object", "props": [{"type": "string", "name": "name", "arg": "$parameters.protocolConfiguration.HTTPConfiguration.headers[].name"}, {"type": "string", "name": "value", "arg": "$parameters.protocolConfiguration.HTTPConfiguration.headers[].value"}]}}, {"type": "string", "name": "method", "arg": "$parameters.protocolConfiguration.HTTPConfiguration.method", "enum": {"items": [{"value": "Get"}]}}, {"type": "array<integer32>", "name": "validStatusCodes", "arg": "$parameters.protocolConfiguration.HTTPConfiguration.validStatusCodes", "item": {"type": "integer32"}}]}]}, {"type": "object", "name": "source", "required": true, "props": [{"type": "integer32", "name": "port", "arg": "$parameters.source.port", "format": {"maximum": 65535, "minimum": 0}}, {"type": "string", "name": "resourceId", "arg": "$parameters.source.resourceId", "required": true}]}], "clientFlatten": true}}}}, "responses": [{"statusCode": [200], "body": {"json": {"var": "$Instance", "schema": {"type": "object", "props": [{"readOnly": true, "type": "integer32", "name": "avgLatencyInMs"}, {"readOnly": true, "type": "string", "name": "connectionStatus", "enum": {"items": [{"value": "Connected"}, {"value": "Degraded"}, {"value": "Disconnected"}, {"value": "Unknown"}]}}, {"readOnly": true, "type": "array<object>", "name": "hops", "item": {"type": "object", "props": [{"readOnly": true, "type": "string", "name": "address"}, {"readOnly": true, "type": "string", "name": "id"}, {"readOnly": true, "type": "array<@ConnectivityIssue_read>", "name": "issues", "item": {"type": "@ConnectivityIssue_read"}}, {"readOnly": true, "type": "array<object>", "name": "links", "item": {"type": "object", "props": [{"readOnly": true, "type": "object", "name": "context", "additionalProps": {"readOnly": true, "item": {"type": "string"}}}, {"readOnly": true, "type": "array<object>", "name": "issues", "item": {"type": "object", "props": [{"readOnly": true, "type": "array<object>", "name": "context", "item": {"type": "object", "additionalProps": {"item": {"type": "string"}}}}, {"readOnly": true, "type": "string", "name": "origin", "enum": {"items": [{"value": "Inbound"}, {"value": "Local"}, {"value": "Outbound"}]}}, {"readOnly": true, "type": "string", "name": "severity", "enum": {"items": [{"value": "Error"}, {"value": "Warning"}]}}, {"readOnly": true, "type": "string", "name": "type", "enum": {"items": [{"value": "AgentStopped"}, {"value": "DnsResolution"}, {"value": "GuestFirewall"}, {"value": "NetworkSecurityRule"}, {"value": "Platform"}, {"value": "PortThrottled"}, {"value": "SocketBind"}, {"value": "Unknown"}, {"value": "UserDefinedRoute"}]}}], "cls": "ConnectivityIssue_read"}}, {"readOnly": true, "type": "string", "name": "linkType"}, {"readOnly": true, "type": "string", "name": "nextHopId"}, {"type": "object", "name": "properties", "props": [{"readOnly": true, "type": "integer64", "name": "roundTripTimeAvg", "format": {"maximum": 4294967295, "minimum": 0}}, {"readOnly": true, "type": "integer64", "name": "roundTripTimeMax", "format": {"maximum": 4294967295, "minimum": 0}}, {"readOnly": true, "type": "integer64", "name": "roundTripTimeMin", "format": {"maximum": 4294967295, "minimum": 0}}], "clientFlatten": true}, {"readOnly": true, "type": "string", "name": "resourceId"}], "cls": "HopLink_read"}}, {"readOnly": true, "type": "array<string>", "name": "nextHopIds", "item": {"type": "string"}}, {"readOnly": true, "type": "array<string>", "name": "previousHopIds", "item": {"type": "string"}}, {"readOnly": true, "type": "array<@HopLink_read>", "name": "previousLinks", "item": {"type": "@HopLink_read"}}, {"readOnly": true, "type": "string", "name": "resourceId"}, {"readOnly": true, "type": "string", "name": "type"}]}}, {"readOnly": true, "type": "integer32", "name": "maxLatencyInMs"}, {"readOnly": true, "type": "integer32", "name": "minLatencyInMs"}, {"readOnly": true, "type": "integer32", "name": "probesFailed"}, {"readOnly": true, "type": "integer32", "name": "probesSent"}], "cls": "ConnectivityInformation_read"}}}}, {"statusCode": [202], "body": {"json": {"var": "$Instance", "schema": {"type": "@ConnectivityInformation_read"}}}}, {"isError": true, "body": {"json": {"schema": {"type": "@ODataV4Format"}}}}]}}], "outputs": [{"type": "object", "ref": "$Instance", "clientFlatten": true}], "confirmation": ""}]}]}